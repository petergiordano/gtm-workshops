<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Landing Zone Analysis</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
        }
        .lucide-icon {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
        }
        .landing-zone {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .landing-zone:hover {
            filter: brightness(1.1);
        }
        .marker {
            cursor: move;
            transition: transform 0.2s ease;
        }
        .marker:hover {
            transform: scale(1.1);
        }
        .marker-competitor {
            filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.2));
        }
        .marker-underserved {
            filter: drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.2));
        }
        .marker-strategic {
            filter: drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.3));
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Test Data from test_data/problems-activity-2A.json -->
    <script type="application/json" id="testData">
    {
      "competitorMarkers": "**Traditional API monitoring tools (e.g., New Relic, Dynatrace, Datadog)**: These are simple to implement, lower upfront costs, and familiar to development teams. Their weaknesses include purely reactive monitoring, late detection of issues, no predictive capabilities, and requiring manual troubleshooting.\n\n**Manual or semi-automated troubleshooting methods used by DevOps teams**: These offer complete control and no additional vendor costs, customized to specific needs. However, they are resource-intensive, time-consuming, have limited scalability, and result in inconsistent outcomes.\n\n**Non-predictive API management solutions**: These are established, integrated with existing tools, and have known pricing models. Their gaps include no ML/AI capabilities, missing automated resolution, poor cross-platform support, and being reactive rather than proactive.",
      "underservedMarkers": "The underserved segment is defined by the critical need for **preemptive API health management** and **automated problem resolution**. Current solutions are predominantly reactive, leaving a significant gap for proactive, predictive capabilities that can prevent costly API failures before they impact customers.",
      "markerNotes": "**Competitors:** Traditional tools are fundamentally reactive, lacking the ability to predict and prevent issues, leading to late detection and high costs. Manual methods, while flexible, are inefficient and prone to human error, hindering scalability. Non-predictive API management solutions are established but do not offer the modern ML/AI capabilities for automated and preemptive issue resolution.\n\n**Underserved Segment:** This segment urgently needs a solution that can move beyond reactive problem-solving to proactive prevention. They seek to reduce significant financial losses due to downtime, minimize manual intervention, and gain unified visibility across complex, multi-platform API environments.",
      "strategicEntryPoint": "Posh AMP's strategic entry point is through **Use Case Positioning**, focusing on \"Preemptive API Health Management\". This involves introducing novel predictive capabilities to create a new workflow around preventing API failures before they impact customers.",
      "strategicJustification": "This strategy positions Posh AMP as a **pioneer in a new use case**, enabling it to define and lead an emerging space in preemptive API management. It avoids direct competition with established reactive monitoring tools by creating a unique value proposition, despite requiring more market education. The core value proposition is enabling a fundamentally different approach to maintaining API reliability through ML-powered prediction and automation.",
      "chosenLandingZone": "Posh chose to target **New/Overlooked Segments** by adopting a \"Use Case Positioning\" strategy. This involves defining new workflows and capabilities rather than competing within an established product category directly.",
      "supportingEvidence": "The choice is supported by several factors: Posh AMP introduces \"novel predictive capabilities\" that establish a new, valuable use case: preemptive API health management. This allows Posh to act as a pioneer alongside incumbents, avoiding direct competition while addressing a significant \"Market Gap\" where \"Few predictive solutions\" exist. The high and rising costs of API failures further underscore the urgency and value of a preemptive approach, validating the need for this new category.",
      "currentStep": 4
    }
    </script>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Removed Progress Code System - using embedded test data instead

        // Icon components
        const Target = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="6"/>
                <circle cx="12" cy="12" r="2"/>
            </svg>
        );

        const Flag = ({ size = 20, className = "", fill = "none" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2">
                <path d="M4 22V4c0 0 3-2 6-2 4 0 6 3 10 3 2 0 4-1 4-1v11c0 0-2 1-4 1-4 0-6-3-10-3-3 0-6 2-6 2" />
                <line x1="4" y1="22" x2="4" y2="15" />
            </svg>
        );


        const MapPin = ({ size = 20, className = "", fill = "none" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
            </svg>
        );


        const Award = ({ size = 20, className = "", fill = "none" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="8" r="7"/>
                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>
            </svg>
        );

        const Lightbulb = ({ size = 20, className = "", fill = "none" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2">
                <path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/>
                <path d="M9 18h6"/>
                <path d="M10 22h4"/>
            </svg>
        );

        const ArrowRight = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="5" y1="12" x2="19" y2="12"/>
                <polyline points="12 5 19 12 12 19"/>
            </svg>
        );

        const FileText = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14,2 14,8 20,8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <line x1="10" y1="9" x2="8" y2="9"/>
            </svg>
        );

        const Download = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
        );

        const HelpCircle = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
        );

        const X = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        // Removed ImportSection and ExportSection components - using embedded test data instead

        // Word count and validation utility
        const getWordCount = (text) => {
            return text.trim().split(/\s+/).filter(w => w.length > 0).length;
        };

        const renderWordCountFeedback = (text, minWords, fieldId) => {
            const wordCount = getWordCount(text);
            const isValid = wordCount >= minWords;
            
            return (
                <div className="flex justify-between items-center mt-2 text-sm">
                    <span className="text-gray-500">
                        (describe in {minWords}+ words)
                    </span>
                    {isValid ? (
                        <div className="flex items-center text-green-600">
                            <div className="w-4 h-4 mr-1 flex items-center justify-center">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className="w-full h-full">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                    <polyline points="22,4 12,14.01 9,11.01"/>
                                </svg>
                            </div>
                            <span>{wordCount} words</span>
                        </div>
                    ) : (
                        <span className="text-gray-400">
                            {wordCount} words
                        </span>
                    )}
                </div>
            );
        };

        const MarketLandingZoneAnalysis = () => {
            const [currentStep, setCurrentStep] = useState(1);
            const [showInstructions, setShowInstructions] = useState(true);
            const [selectedMarkerType, setSelectedMarkerType] = useState('competitor');
            const [markers, setMarkers] = useState([]);
            const [activeMarkerIndex, setActiveMarkerIndex] = useState(null);
            const [justification, setJustification] = useState('');
            const [landingZoneChoice, setLandingZoneChoice] = useState('');
            const [evidence, setEvidence] = useState('');
            const [hasPlacedStrategic, setHasPlacedStrategic] = useState(false);
            const [activityComplete, setActivityComplete] = useState(false);
            
            // Dev mode state
            const [devMode, setDevMode] = useState(false);
            const [devFillLoading, setDevFillLoading] = useState(false);
            
            const diagramRef = useRef(null);

            // Reusable dev mode hook for loading test data
            const loadTestDataFromScript = (setters) => {
                try {
                    const dataEl = document.getElementById('testData');
                    if (dataEl) {
                        const data = JSON.parse(dataEl.textContent);
                        Object.entries(setters).forEach(([key, setter]) => {
                            if (data[key] !== undefined) {
                                setter(data[key]);
                            }
                        });
                        console.log('✅ Test data loaded successfully from script tag');
                        return true;
                    } else {
                        console.error('❌ Test data script tag not found');
                        return false;
                    }
                } catch (error) {
                    console.error('❌ Failed to parse test data:', error);
                    return false;
                }
            };

            // Dev fill function (uses embedded test data)
            const devFillData = () => {
                setDevFillLoading(true);
                try {
                    const testData = JSON.parse(document.getElementById('testData').textContent);
                    
                    // Parse the JSON fields and create markers
                    const competitorMarkers = [];
                    const underservedMarkers = [];
                    
                    // Create sample markers based on test data
                    competitorMarkers.push({
                        id: Date.now() + 1,
                        type: 'competitor',
                        x: 120,
                        y: 140,
                        notes: testData.competitorMarkers
                    });
                    
                    underservedMarkers.push({
                        id: Date.now() + 2,
                        type: 'underserved',
                        x: 200,
                        y: 280,
                        notes: testData.underservedMarkers
                    });
                    
                    const strategicMarker = {
                        id: Date.now() + 3,
                        type: 'strategic',
                        x: 200,
                        y: 187,
                        notes: testData.strategicEntryPoint
                    };
                    
                    setMarkers([...competitorMarkers, ...underservedMarkers, strategicMarker]);
                    setLandingZoneChoice(testData.chosenLandingZone.includes('New/Overlooked') ? 'new' : 'mainstream');
                    setEvidence(testData.supportingEvidence);
                    setHasPlacedStrategic(true);
                    setCurrentStep(testData.currentStep || 4);
                    
                    console.log('✅ Dev data loaded successfully (from embedded test data)');
                } catch (error) {
                    console.error('❌ Failed to load dev data:', error);
                    alert(`Failed to load test data: ${error.message}`);
                } finally {
                    setDevFillLoading(false);
                }
            };

            // Toggle dev mode (double-click title)
            const toggleDevMode = () => {
                setDevMode(!devMode);
                console.log(devMode ? '🔒 Dev mode disabled' : '🔓 Dev mode enabled');
            };

            // Markdown export function for professional activity summary
            const generateMarkdownSummary = () => {
                const competitorCount = markers.filter(m => m.type === 'competitor').length;
                const underservedCount = markers.filter(m => m.type === 'underserved').length;
                const strategicMarker = markers.find(m => m.type === 'strategic');
                
                const landingZoneName = landingZoneChoice === 'mainstream' ? 'Mainstream Market' :
                                      landingZoneChoice === 'lowend' ? 'Low-end Market' :
                                      landingZoneChoice === 'new' ? 'New/Overlooked Segments' :
                                      landingZoneChoice === 'overlap' ? 'Overlap Between Segments' : 'Not specified';
                
                return `# Problems Worth Solving: Market Landing Zone Analysis

### 📋 Executive Summary

**Activity Completion Status: 100%**

**Strategic Analysis:**
- Competitor focus areas mapped: ${competitorCount}
- Underserved segments identified: ${underservedCount}
- Strategic entry point defined: ${strategicMarker ? 'Yes' : 'No'}
- Landing zone selected: ${landingZoneName}
- Completion time: ${new Date().toLocaleDateString('en-US', { 
  weekday: 'long', 
  month: 'long', 
  day: 'numeric',
  year: 'numeric'
})}

---

### 🎯 Market Landscape Analysis

**Competitor Focus Areas (${competitorCount} mapped):**
${markers.filter(m => m.type === 'competitor').map(marker => `- ${marker.notes || 'No notes provided'}`).join('\n') || '- No competitor areas mapped'}

**Underserved Market Segments (${underservedCount} identified):**
${markers.filter(m => m.type === 'underserved').map(marker => `- ${marker.notes || 'No notes provided'}`).join('\n') || '- No underserved segments identified'}

### 🚀 Strategic Entry Point

**Selected Landing Zone:** ${landingZoneName}

**Strategic Positioning:**
${strategicMarker?.notes || '[Strategic positioning not defined]'}

**Supporting Evidence:**
${evidence || '[No supporting evidence provided]'}

### 📊 Strategic Assessment

**Market Positioning Strategy:**
- **Target landing zone**: ${landingZoneName}
- **Competitive landscape**: ${competitorCount > 0 ? 'Mapped and analyzed' : 'Needs further analysis'}
- **Market opportunities**: ${underservedCount > 0 ? 'Identified and documented' : 'Requires identification'}
- **Strategic clarity**: ${strategicMarker && evidence ? 'Well-defined with evidence' : 'Needs refinement'}

### 💡 Key Takeaway

Successful market entry requires understanding where competitors focus and where customers remain underserved. Your strategic analysis provides the foundation for positioning your solution in the most advantageous market segment.

### 📅 Assessment Details

**Report Generated:** ${new Date().toLocaleDateString('en-US', { 
  weekday: 'long', 
  year: 'numeric', 
  month: 'long', 
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
  timeZoneName: 'short'
})}

**Activity:** Market Landing Zone Analysis (Activity 2 of 3)  
**Workshop Series:** Problems Worth Solving - GTM Program  
**Next Steps:** Continue to Activity 3 - Problem Scoring Framework

*This assessment captures your strategic market positioning analysis. Use these insights to guide your go-to-market strategy and competitive positioning.*`;
            };
            
            const handleAddMarker = (e) => {
                // Only allow adding markers in steps 1 and 2
                if (currentStep > 2 || !diagramRef.current) return;
                
                const rect = diagramRef.current.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Limit strategic markers to one
                if (selectedMarkerType === 'strategic' && markers.some(m => m.type === 'strategic')) {
                    // Replace the existing strategic marker
                    setMarkers(prev => [
                        ...prev.filter(m => m.type !== 'strategic'),
                        { id: Date.now(), type: selectedMarkerType, x, y, notes: '' }
                    ]);
                    setHasPlacedStrategic(true);
                } else {
                    setMarkers(prev => [
                        ...prev,
                        { id: Date.now(), type: selectedMarkerType, x, y, notes: '' }
                    ]);
                    if (selectedMarkerType === 'strategic') {
                        setHasPlacedStrategic(true);
                    }
                }
            };
            
            const handleMarkerClick = (index) => {
                setActiveMarkerIndex(index);
            };
            
            const handleMarkerDrag = (e, index) => {
                if (!diagramRef.current) return;
                
                const rect = diagramRef.current.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                setMarkers(prev => prev.map((marker, i) => 
                    i === index ? { ...marker, x, y } : marker
                ));
            };
            
            const handleDeleteMarker = (index) => {
                setMarkers(prev => {
                    const newMarkers = [...prev];
                    const deletedMarker = newMarkers.splice(index, 1)[0];
                    if (deletedMarker.type === 'strategic') {
                        setHasPlacedStrategic(false);
                    }
                    return newMarkers;
                });
                setActiveMarkerIndex(null);
            };
            
            const handleMarkerNotesChange = (notes) => {
                if (activeMarkerIndex === null) return;
                
                console.log('Updating marker notes:', notes, 'for index:', activeMarkerIndex);
                setMarkers(prev => {
                    const updated = prev.map((marker, i) => 
                        i === activeMarkerIndex ? { ...marker, notes } : marker
                    );
                    console.log('Updated markers:', updated);
                    return updated;
                });
            };
            
            const resetActivity = () => {
                setCurrentStep(1);
                setShowInstructions(true);
                setSelectedMarkerType('competitor');
                setMarkers([]);
                setActiveMarkerIndex(null);
                setJustification('');
                setLandingZoneChoice('');
                setEvidence('');
                setHasPlacedStrategic(false);
            };
            
            const isReadyForNextStep = () => {
                if (currentStep === 1) {
                    return markers.some(m => m.type === 'competitor') && 
                           markers.some(m => m.type === 'underserved');
                } else if (currentStep === 2) {
                    return hasPlacedStrategic;
                } else if (currentStep === 3) {
                    return landingZoneChoice && getWordCount(evidence) >= 10;
                }
                return false;
            };
            
            const renderMarker = (marker, index) => {
                const isActive = activeMarkerIndex === index;
                const isDraggable = currentStep === 1 || (currentStep === 2 && marker.type === 'strategic');
                let markerIcon;
                
                switch(marker.type) {
                    case 'competitor':
                        markerIcon = <Flag 
                            size={isActive ? 32 : 28} 
                            className="marker-competitor text-gray-700" 
                            fill={isActive ? "#f59e0b30" : "#64748b20"}
                        />;
                        break;
                    case 'underserved':
                        markerIcon = <Lightbulb 
                            size={isActive ? 32 : 28} 
                            className="marker-underserved text-blue-600" 
                            fill={isActive ? "#3b82f630" : "#3b82f620"}
                        />;
                        break;
                    case 'strategic':
                        markerIcon = <MapPin 
                            size={isActive ? 36 : 32} 
                            className="marker-strategic text-orange-600" 
                            fill={isActive ? "#f97316" : "#f97316"}
                        />;
                        break;
                    default:
                        markerIcon = <div className="w-4 h-4 bg-black rounded-full" />;
                }
                
                return (
                    <div 
                        key={marker.id}
                        className={`marker absolute ${isActive ? 'z-30' : 'z-20'} ${isDraggable ? 'cursor-move' : 'cursor-pointer'}`}
                        style={{ 
                            left: `${marker.x}px`, 
                            top: `${marker.y}px`,
                            transform: `translate(-50%, -50%) ${isActive ? 'scale(1.1)' : ''}`
                        }}
                        onClick={(e) => {
                            e.stopPropagation();
                            if (currentStep === 1 || currentStep === 2) {
                                handleMarkerClick(index);
                            }
                        }}
                        draggable={isDraggable}
                        onDragStart={(e) => {
                            if (isDraggable) {
                                // Set some required data for Firefox
                                e.dataTransfer.setData('text/plain', '');
                                handleMarkerClick(index);
                            } else {
                                e.preventDefault();
                            }
                        }}
                        onDrag={(e) => {
                            if (isDraggable && e.clientX !== 0 && e.clientY !== 0) {
                                handleMarkerDrag(e, index);
                            }
                        }}
                    >
                        {markerIcon}
                    </div>
                );
            };
            
            const renderMarkerDetails = () => {
                if (activeMarkerIndex === null) return null;
                
                const marker = markers[activeMarkerIndex];
                const typeLabels = {
                    competitor: 'Competitor Focus Area',
                    underserved: 'Underserved Segment',
                    strategic: 'Strategic Entry Point'
                };
                
                const typeColors = {
                    competitor: 'bg-gray-100 border-gray-300 text-gray-800',
                    underserved: 'bg-blue-50 border-blue-200 text-blue-800',
                    strategic: 'bg-orange-50 border-orange-300 text-orange-800'
                };
                
                return (
                    <div className={`mt-4 p-4 rounded-lg border ${typeColors[marker.type]}`}>
                        <div className="flex justify-between items-start mb-3">
                            <h4 className="font-semibold">{typeLabels[marker.type]}</h4>
                            <button 
                                onClick={() => handleDeleteMarker(activeMarkerIndex)}
                                className="text-red-500 hover:text-red-700 text-xs"
                            >
                                Remove
                            </button>
                        </div>
                        
                        <label className="block text-sm font-medium mb-1">
                            Notes about this {marker.type === 'competitor' ? 'competitor' : marker.type === 'underserved' ? 'opportunity' : 'strategic choice'}:
                        </label>
                        <textarea
                            value={marker.notes}
                            onChange={(e) => handleMarkerNotesChange(e.target.value)}
                            className="w-full h-20 p-2 border border-gray-300 rounded text-sm placeholder-gray-400"
                            placeholder={marker.type === 'competitor' 
                                ? "Who is this competitor and what segment are they targeting?"
                                : marker.type === 'underserved'
                                ? "Why is this segment underserved? What needs aren't being met?"
                                : "Why is this a strategic entry point for your product?"
                            }
                        />
                        {renderWordCountFeedback(marker.notes, 5, `marker-${activeMarkerIndex}`)}
                    </div>
                );
            };
            
            const renderStep1 = () => (
                <div className="space-y-6">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Map Your Market Landscape
                        </h3>
                        <p className="text-gray-600">
                            Mark where competitors are focusing and where customers are underserved
                        </p>
                    </div>
                    
                    {showInstructions && (
                        <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6">
                            <div className="flex justify-between items-start">
                                <h4 className="font-semibold text-blue-800 mb-2">Instructions</h4>
                                <button 
                                    onClick={() => setShowInstructions(false)}
                                    className="text-blue-500 hover:text-blue-700 text-xs"
                                >
                                    Hide
                                </button>
                            </div>
                            <ol className="list-decimal list-inside text-blue-700 space-y-2 ml-2">
                                <li>Select "Competitor Focus" from the toolbar</li>
                                <li>Click on the diagram to place markers where competitors are focusing</li>
                                <li>Switch to "Underserved Segment" and mark areas with unmet needs</li>
                                <li>Add notes to each marker for more context</li>
                            </ol>
                        </div>
                    )}
                    
                    <div className="flex space-x-4 mb-4">
                        <button
                            className={`px-3 py-2 rounded-lg flex items-center ${
                                selectedMarkerType === 'competitor' 
                                    ? 'bg-gray-700 text-white' 
                                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                            }`}
                            onClick={() => setSelectedMarkerType('competitor')}
                        >
                            <Flag className="mr-2" size={16} />
                            <span>Competitor Focus</span>
                        </button>
                        
                        <button
                            className={`px-3 py-2 rounded-lg flex items-center ${
                                selectedMarkerType === 'underserved' 
                                    ? 'bg-blue-600 text-white' 
                                    : 'bg-blue-50 text-blue-700 hover:bg-blue-100'
                            }`}
                            onClick={() => setSelectedMarkerType('underserved')}
                        >
                            <Lightbulb className="mr-2" size={16} />
                            <span>Underserved Segment</span>
                        </button>
                    </div>
                    
                    <div 
                        ref={diagramRef}
                        className="relative w-full h-[400px] border-2 border-gray-200 rounded-xl bg-white overflow-hidden"
                        onClick={handleAddMarker}
                    >
                        {/* Diagram background with three overlapping circles */}
                        <svg width="100%" height="100%" viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">
                            <defs>
                                <radialGradient id="gradient-mainstream" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                    <stop offset="0%" stopColor="#f8fafc" />
                                    <stop offset="100%" stopColor="#e2e8f0" />
                                </radialGradient>
                                <radialGradient id="gradient-lowend" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                    <stop offset="0%" stopColor="#f8fafc" />
                                    <stop offset="100%" stopColor="#dbeafe" />
                                </radialGradient>
                                <radialGradient id="gradient-new" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                    <stop offset="0%" stopColor="#f8fafc" />
                                    <stop offset="100%" stopColor="#ffedd5" />
                                </radialGradient>
                            </defs>
                            
                            {/* Mainstream Market Circle */}
                            <circle cx="120" cy="140" r="110" fill="url(#gradient-mainstream)" fillOpacity="0.7" stroke="#94a3b8" strokeWidth="2" className="landing-zone" />
                            <text x="120" y="70" textAnchor="middle" fill="#334155" fontWeight="bold">Mainstream Market</text>
                            
                            {/* Low-end Market Circle */}
                            <circle cx="280" cy="140" r="110" fill="url(#gradient-lowend)" fillOpacity="0.7" stroke="#93c5fd" strokeWidth="2" className="landing-zone" />
                            <text x="280" y="70" textAnchor="middle" fill="#2563eb" fontWeight="bold">Low-end Market</text>
                            
                            {/* New/Overlooked Segments Circle */}
                            <circle cx="200" cy="280" r="110" fill="url(#gradient-new)" fillOpacity="0.7" stroke="#fdba74" strokeWidth="2" className="landing-zone" />
                            <text x="200" y="360" textAnchor="middle" fill="#ea580c" fontWeight="bold">New/Overlooked Segments</text>
                            
                            {/* Center overlap highlight */}
                            <circle cx="200" cy="187" r="25" fill="#fff" fillOpacity="0.3" stroke="none" />
                        </svg>
                        
                        {/* Render all placed markers */}
                        {markers.map((marker, index) => renderMarker(marker, index))}
                    </div>
                    
                    {/* Marker details section */}
                    {renderMarkerDetails()}
                    
                    {/* Navigation */}
                    <div className="flex justify-between mt-6">
                        <button
                            onClick={() => setShowInstructions(!showInstructions)}
                            className="text-gray-500 hover:text-gray-700"
                        >
                            {showInstructions ? 'Hide Instructions' : 'Show Instructions'}
                        </button>
                        
                        <button
                            onClick={() => setCurrentStep(2)}
                            disabled={!isReadyForNextStep()}
                            className={`px-4 py-2 rounded-lg flex items-center ${
                                isReadyForNextStep()
                                    ? 'bg-orange-500 text-white hover:bg-orange-600'
                                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                            }`}
                        >
                            <span>Continue</span>
                            <ArrowRight className="ml-2" size={16} />
                        </button>
                    </div>
                </div>
            );
            
            const renderStep2 = () => (
                <div className="space-y-6">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Identify Your Strategic Entry Point
                        </h3>
                        <p className="text-gray-600">
                            Place a strategic entry point marker where your product should focus
                        </p>
                    </div>
                    
                    <div className="bg-orange-50 border-2 border-orange-200 rounded-lg p-4 mb-6">
                        <h4 className="font-semibold text-orange-800 mb-2">Instructions</h4>
                        <ol className="list-decimal list-inside text-orange-700 space-y-2 ml-2">
                            <li>Examine where competitors are focusing and where segments are underserved</li>
                            <li>Click on the diagram to place your strategic entry point</li>
                            <li>Add notes explaining why this is your best market entry strategy</li>
                        </ol>
                    </div>
                    
                    <div className="flex justify-center mb-4">
                        <button
                            className="px-4 py-2 rounded-lg flex items-center bg-orange-500 text-white"
                            onClick={() => setSelectedMarkerType('strategic')}
                        >
                            <MapPin className="mr-2" size={18} fill="#ffffff50" />
                            <span>Strategic Entry Point</span>
                        </button>
                    </div>
                    
                    <div 
                        ref={diagramRef}
                        className="relative w-full h-[400px] border-2 border-gray-200 rounded-xl bg-white overflow-hidden"
                        onClick={handleAddMarker}
                    >
                        {/* Diagram background with three overlapping circles */}
                        <svg width="100%" height="100%" viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">
                            <defs>
                                <radialGradient id="gradient-mainstream" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                    <stop offset="0%" stopColor="#f8fafc" />
                                    <stop offset="100%" stopColor="#e2e8f0" />
                                </radialGradient>
                                <radialGradient id="gradient-lowend" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                    <stop offset="0%" stopColor="#f8fafc" />
                                    <stop offset="100%" stopColor="#dbeafe" />
                                </radialGradient>
                                <radialGradient id="gradient-new" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                    <stop offset="0%" stopColor="#f8fafc" />
                                    <stop offset="100%" stopColor="#ffedd5" />
                                </radialGradient>
                            </defs>
                            
                            {/* Mainstream Market Circle */}
                            <circle cx="120" cy="140" r="110" fill="url(#gradient-mainstream)" fillOpacity="0.7" stroke="#94a3b8" strokeWidth="2" className="landing-zone" />
                            <text x="120" y="70" textAnchor="middle" fill="#334155" fontWeight="bold">Mainstream Market</text>
                            
                            {/* Low-end Market Circle */}
                            <circle cx="280" cy="140" r="110" fill="url(#gradient-lowend)" fillOpacity="0.7" stroke="#93c5fd" strokeWidth="2" className="landing-zone" />
                            <text x="280" y="70" textAnchor="middle" fill="#2563eb" fontWeight="bold">Low-end Market</text>
                            
                            {/* New/Overlooked Segments Circle */}
                            <circle cx="200" cy="280" r="110" fill="url(#gradient-new)" fillOpacity="0.7" stroke="#fdba74" strokeWidth="2" className="landing-zone" />
                            <text x="200" y="360" textAnchor="middle" fill="#ea580c" fontWeight="bold">New/Overlooked Segments</text>
                            
                            {/* Center overlap highlight */}
                            <circle cx="200" cy="187" r="25" fill="#fff" fillOpacity="0.3" stroke="none" />
                        </svg>
                        
                        {/* Render all placed markers */}
                        {markers.map((marker, index) => renderMarker(marker, index))}
                    </div>
                    
                    {/* Marker details section */}
                    {renderMarkerDetails()}
                    
                    {/* Strategic Entry Point Notes - Always Visible */}
                    <div className="mt-6 p-4 rounded-lg border bg-orange-50 border-orange-300 text-orange-800">
                        <h4 className="font-semibold mb-3">Strategy Entry Point - Notes about this strategic choice:</h4>
                        <textarea
                            value={(() => {
                                const strategicMarker = markers.find(m => m.type === 'strategic');
                                return strategicMarker ? strategicMarker.notes : '';
                            })()}
                            onChange={(e) => {
                                const strategicMarkerIndex = markers.findIndex(m => m.type === 'strategic');
                                if (strategicMarkerIndex !== -1) {
                                    // Update existing strategic marker
                                    setMarkers(prev => prev.map((marker, i) => 
                                        i === strategicMarkerIndex ? { ...marker, notes: e.target.value } : marker
                                    ));
                                } else {
                                    // Create a new strategic marker at center of diagram if none exists
                                    setMarkers(prev => [
                                        ...prev,
                                        { 
                                            id: Date.now(), 
                                            type: 'strategic', 
                                            x: 200, 
                                            y: 187, 
                                            notes: e.target.value 
                                        }
                                    ]);
                                    setHasPlacedStrategic(true);
                                }
                            }}
                            className="w-full h-24 p-3 border border-orange-300 rounded-lg text-sm placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-200"
                            placeholder="Why is this a strategic entry point for your product? Explain your reasoning..."
                        />
                        {(() => {
                            const strategicMarker = markers.find(m => m.type === 'strategic');
                            const notes = strategicMarker ? strategicMarker.notes : '';
                            return renderWordCountFeedback(notes, 5, 'strategic-notes');
                        })()}
                    </div>
                    
                    {/* Navigation */}
                    <div className="flex justify-between mt-6">
                        <button
                            onClick={() => setCurrentStep(1)}
                            className="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50"
                        >
                            Back
                        </button>
                        
                        <button
                            onClick={() => setCurrentStep(3)}
                            disabled={!isReadyForNextStep()}
                            className={`px-4 py-2 rounded-lg flex items-center ${
                                isReadyForNextStep()
                                    ? 'bg-orange-500 text-white hover:bg-orange-600'
                                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                            }`}
                        >
                            <span>Continue</span>
                            <ArrowRight className="ml-2" size={16} />
                        </button>
                    </div>
                </div>
            );
            
            const renderStep3 = () => (
                <div className="space-y-6">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Justify Your Strategic Choice
                        </h3>
                        <p className="text-gray-600">
                            Provide evidence for why your selected entry point is the best strategy
                        </p>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div 
                                className="relative w-full h-[400px] border-2 border-gray-200 rounded-xl bg-white overflow-hidden mb-4"
                            >
                                {/* Diagram background with three overlapping circles */}
                                <svg width="100%" height="100%" viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">
                                    <defs>
                                        <radialGradient id="gradient-mainstream-3" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                            <stop offset="0%" stopColor="#f8fafc" />
                                            <stop offset="100%" stopColor="#e2e8f0" />
                                        </radialGradient>
                                        <radialGradient id="gradient-lowend-3" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                            <stop offset="0%" stopColor="#f8fafc" />
                                            <stop offset="100%" stopColor="#dbeafe" />
                                        </radialGradient>
                                        <radialGradient id="gradient-new-3" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                            <stop offset="0%" stopColor="#f8fafc" />
                                            <stop offset="100%" stopColor="#ffedd5" />
                                        </radialGradient>
                                    </defs>
                                    
                                    {/* Mainstream Market Circle */}
                                    <circle cx="120" cy="140" r="110" fill="url(#gradient-mainstream-3)" fillOpacity="0.7" stroke="#94a3b8" strokeWidth="2" />
                                    <text x="120" y="70" textAnchor="middle" fill="#334155" fontWeight="bold">Mainstream Market</text>
                                    
                                    {/* Low-end Market Circle */}
                                    <circle cx="280" cy="140" r="110" fill="url(#gradient-lowend-3)" fillOpacity="0.7" stroke="#93c5fd" strokeWidth="2" />
                                    <text x="280" y="70" textAnchor="middle" fill="#2563eb" fontWeight="bold">Low-end Market</text>
                                    
                                    {/* New/Overlooked Segments Circle */}
                                    <circle cx="200" cy="280" r="110" fill="url(#gradient-new-3)" fillOpacity="0.7" stroke="#fdba74" strokeWidth="2" />
                                    <text x="200" y="360" textAnchor="middle" fill="#ea580c" fontWeight="bold">New/Overlooked Segments</text>
                                    
                                    {/* Center overlap highlight */}
                                    <circle cx="200" cy="187" r="25" fill="#fff" fillOpacity="0.3" stroke="none" />
                                </svg>
                                
                                {/* Render all placed markers */}
                                {markers.map((marker, index) => renderMarker(marker, index))}
                            </div>
                            
                            <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                                <h4 className="font-medium text-gray-800 mb-2">Marker Summary</h4>
                                <div className="space-y-2 text-sm">
                                    <div className="flex items-start">
                                        <Flag className="mr-2 text-gray-700 flex-shrink-0 mt-1" size={16} />
                                        <div>
                                            <p className="font-medium">Competitor Focus Areas:</p>
                                            <p className="text-gray-600">{markers.filter(m => m.type === 'competitor').length} markers placed</p>
                                        </div>
                                    </div>
                                    
                                    <div className="flex items-start">
                                        <Lightbulb className="mr-2 text-blue-600 flex-shrink-0 mt-1" size={16} />
                                        <div>
                                            <p className="font-medium">Underserved Segments:</p>
                                            <p className="text-gray-600">{markers.filter(m => m.type === 'underserved').length} markers placed</p>
                                        </div>
                                    </div>
                                    
                                    <div className="flex items-start">
                                        <MapPin className="mr-2 text-orange-600 flex-shrink-0 mt-1" size={16} fill="#f97316" />
                                        <div>
                                            <p className="font-medium">Strategic Entry Point:</p>
                                            {(() => {
                                                const strategicMarker = markers.find(m => m.type === 'strategic');
                                                if (!strategicMarker) {
                                                    return <p className="text-gray-500 italic">No strategic entry point placed</p>;
                                                }
                                                if (strategicMarker.notes && strategicMarker.notes.length > 0) {
                                                    return <p className="text-gray-600">{strategicMarker.notes}</p>;
                                                }
                                                return <p className="text-gray-500 italic">No notes added</p>;
                                            })()}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                    Which landing zone did you choose?
                                </label>
                                <select
                                    value={landingZoneChoice}
                                    onChange={(e) => setLandingZoneChoice(e.target.value)}
                                    className="w-full p-2 border border-gray-300 rounded-lg"
                                >
                                    <option value="">Select a landing zone</option>
                                    <option value="mainstream">Mainstream Market</option>
                                    <option value="lowend">Low-end Market</option>
                                    <option value="new">New/Overlooked Segments</option>
                                    <option value="overlap">Overlap Between Segments</option>
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">
                                    What evidence supports your choice?
                                </label>
                                <textarea
                                    value={evidence}
                                    onChange={(e) => setEvidence(e.target.value)}
                                    className="w-full h-40 p-3 border border-gray-300 rounded-lg placeholder-gray-400"
                                    placeholder="Explain why this landing zone matches your strengths and market opportunity. Consider:
- What specific advantage do you have in this segment?
- Why are customers underserved here?
- How does your technology or approach fit this segment?"
                                />
                                {renderWordCountFeedback(evidence, 10, 'evidence')}
                            </div>
                            
                            <div className="bg-orange-50 border-l-4 border-orange-500 p-4 mt-4">
                                <h4 className="font-medium text-orange-800 mb-2">Strategic Entry Guidance</h4>
                                <div className="text-sm text-orange-700">
                                    <p className="mb-2"><strong>Mainstream Market:</strong> Requires a product 10-100x better than competitors</p>
                                    <p className="mb-2"><strong>Low-end Market:</strong> Needs a simpler, cheaper alternative to mainstream offerings</p>
                                    <p><strong>New/Overlooked Segments:</strong> Targets customers not yet served by existing solutions</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Navigation */}
                    <div className="flex justify-between mt-6">
                        <button
                            onClick={() => setCurrentStep(2)}
                            className="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50"
                        >
                            Back
                        </button>
                        
                        <button
                            onClick={() => setCurrentStep(4)}
                            disabled={!isReadyForNextStep()}
                            className={`px-4 py-2 rounded-lg flex items-center ${
                                isReadyForNextStep()
                                    ? 'bg-orange-500 text-white hover:bg-orange-600'
                                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                            }`}
                        >
                            <span>Complete Analysis</span>
                            <ArrowRight className="ml-2" size={16} />
                        </button>
                    </div>
                </div>
            );
            
            const renderStep4 = () => (
                <div className="space-y-6">
                    <div className="text-center mb-6">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Market Landing Zone Analysis Complete
                        </h3>
                        <p className="text-gray-600">
                            Summary of your strategic market entry analysis
                        </p>
                    </div>
                    
                    <div className="bg-green-50 border-2 border-green-300 rounded-lg p-6 mb-6">
                        <div className="flex items-center mb-4">
                            <Award className="text-green-600 mr-2" size={24} fill="#22c55e30" />
                            <h4 className="text-lg font-semibold text-green-800">Analysis Complete!</h4>
                        </div>
                        
                        <p className="text-green-700 mb-4">You've successfully completed the Market Landing Zone Analysis. Here's your strategy:</p>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <div 
                                    className="relative w-full h-[400px] border-2 border-gray-200 rounded-xl bg-white overflow-hidden mb-4"
                                >
                                    {/* Diagram background with three overlapping circles */}
                                    <svg width="100%" height="100%" viewBox="0 0 400 400" preserveAspectRatio="xMidYMid meet">
                                        <defs>
                                            <radialGradient id="gradient-mainstream-4" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                                <stop offset="0%" stopColor="#f8fafc" />
                                                <stop offset="100%" stopColor="#e2e8f0" />
                                            </radialGradient>
                                            <radialGradient id="gradient-lowend-4" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                                <stop offset="0%" stopColor="#f8fafc" />
                                                <stop offset="100%" stopColor="#dbeafe" />
                                            </radialGradient>
                                            <radialGradient id="gradient-new-4" cx="0.5" cy="0.5" r="0.5" fx="0.5" fy="0.5">
                                                <stop offset="0%" stopColor="#f8fafc" />
                                                <stop offset="100%" stopColor="#ffedd5" />
                                            </radialGradient>
                                        </defs>
                                        
                                        {/* Mainstream Market Circle */}
                                        <circle cx="120" cy="140" r="110" fill="url(#gradient-mainstream-4)" fillOpacity="0.7" stroke="#94a3b8" strokeWidth="2" />
                                        <text x="120" y="70" textAnchor="middle" fill="#334155" fontWeight="bold">Mainstream Market</text>
                                        
                                        {/* Low-end Market Circle */}
                                        <circle cx="280" cy="140" r="110" fill="url(#gradient-lowend-4)" fillOpacity="0.7" stroke="#93c5fd" strokeWidth="2" />
                                        <text x="280" y="70" textAnchor="middle" fill="#2563eb" fontWeight="bold">Low-end Market</text>
                                        
                                        {/* New/Overlooked Segments Circle */}
                                        <circle cx="200" cy="280" r="110" fill="url(#gradient-new-4)" fillOpacity="0.7" stroke="#fdba74" strokeWidth="2" />
                                        <text x="200" y="360" textAnchor="middle" fill="#ea580c" fontWeight="bold">New/Overlooked Segments</text>
                                        
                                        {/* Center overlap highlight */}
                                        <circle cx="200" cy="187" r="25" fill="#fff" fillOpacity="0.3" stroke="none" />
                                    </svg>
                                    
                                    {/* Render all placed markers */}
                                    {markers.map((marker, index) => renderMarker(marker, index))}
                                </div>
                            </div>
                            
                            <div>
                                <div className="bg-white border border-green-200 rounded-lg p-4 mb-4">
                                    <h5 className="font-medium text-green-800 mb-2">Strategic Entry Point</h5>
                                    <p className="text-sm text-gray-700 mb-2">
                                        <span className="font-semibold">Selected landing zone:</span> {
                                            landingZoneChoice === 'mainstream' ? 'Mainstream Market' :
                                            landingZoneChoice === 'lowend' ? 'Low-end Market' :
                                            landingZoneChoice === 'new' ? 'New/Overlooked Segments' :
                                            'Overlap Between Segments'
                                        }
                                    </p>
                                    <p className="text-sm text-gray-700">
                                        <span className="font-semibold">Strategic reasoning:</span> {evidence}
                                    </p>
                                </div>
                                
                                <div className="bg-white border border-green-200 rounded-lg p-4">
                                    <h5 className="font-medium text-green-800 mb-2">Market Landscape</h5>
                                    <p className="text-sm text-gray-700 mb-1">
                                        <span className="font-semibold">Competitor focus areas:</span> {markers.filter(m => m.type === 'competitor').length}
                                    </p>
                                    <p className="text-sm text-gray-700">
                                        <span className="font-semibold">Underserved segments:</span> {markers.filter(m => m.type === 'underserved').length}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div className="bg-orange-100 border-l-4 border-orange-500 p-4 mb-6">
                        <div className="flex">
                            <div className="flex-shrink-0">
                                <svg className="h-5 w-5 text-orange-500" viewBox="0 0 20 20" fill="currentColor">
                                    <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
                                </svg>
                            </div>
                            <div className="ml-3">
                                <h3 className="text-sm font-medium text-orange-800">Key Takeaway</h3>
                                <div className="mt-2 text-sm text-orange-700">
                                    <p>
                                        Your market entry strategy is crucial for startup success. By targeting {
                                            landingZoneChoice === 'mainstream' ? 'the mainstream market with a significantly better solution' :
                                            landingZoneChoice === 'lowend' ? 'the low-end market with a simpler, more affordable solution' :
                                            landingZoneChoice === 'new' ? 'new or overlooked segments not yet served by competitors' :
                                            'the overlap between market segments where you can leverage unique advantages'
                                        }, you've identified a strategic path forward that aligns with your strengths and market opportunities.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Export Professional Report */}
                    <div className="bg-white border border-gray-300 rounded-lg p-4 mb-6">
                        <div className="flex items-center mb-3">
                            <FileText className="text-blue-600 mr-2" size={20} />
                            <h4 className="font-semibold text-gray-800">📄 Export Professional Report</h4>
                        </div>
                        
                        <p className="text-sm text-gray-600 mb-3">
                            Your market landing zone analysis has been formatted as a professional markdown report for easy sharing
                            and documentation.
                        </p>

                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
                            <h5 className="font-medium text-blue-800 mb-2">📌 Google Docs Instructions:</h5>
                            <ol className="text-sm text-blue-700 space-y-1">
                                <li>1. Click "Copy Activity Summary" below</li>
                                <li>2. Open Google Docs and create a new document</li>
                                <li>3. Go to <strong>Edit → Paste special → Paste from markdown</strong></li>
                                <li>4. Your report will appear with proper formatting!</li>
                            </ol>
                            <p className="text-xs text-blue-600 mt-2">
                                💡 <strong>Tip:</strong> "Paste from markdown" preserves all formatting including headers and sections.
                            </p>
                        </div>

                        <textarea
                            id="markdownSummary"
                            readOnly
                            className="w-full h-64 text-sm p-3 font-mono border border-gray-200 rounded-lg bg-gray-50 resize mb-3"
                            value={generateMarkdownSummary()}
                        />
                        
                        <div className="flex flex-col items-center">
                            <button
                                onClick={(event) => {
                                    // Copy to clipboard with fallback
                                    const copyToClipboard = async (text) => {
                                        try {
                                            // Try modern clipboard API first
                                            if (navigator.clipboard && navigator.clipboard.writeText) {
                                                await navigator.clipboard.writeText(text);
                                                return true;
                                            } else {
                                                // Fallback for older browsers or file:// protocol
                                                const textArea = document.createElement('textarea');
                                                textArea.value = text;
                                                textArea.style.position = 'fixed';
                                                textArea.style.left = '-999999px';
                                                document.body.appendChild(textArea);
                                                textArea.focus();
                                                textArea.select();
                                                
                                                try {
                                                    const successful = document.execCommand('copy');
                                                    document.body.removeChild(textArea);
                                                    return successful;
                                                } catch (err) {
                                                    document.body.removeChild(textArea);
                                                    return false;
                                                }
                                            }
                                        } catch (err) {
                                            console.error('Copy failed:', err);
                                            return false;
                                        }
                                    };

                                    const el = document.getElementById('markdownSummary');
                                    const statusDiv = document.getElementById('copyStatus');
                                    
                                    copyToClipboard(el.value).then((success) => {
                                        if (success) {
                                            // Show success status below button
                                            statusDiv.innerHTML = `
                                                <div class="mt-2 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded-lg">
                                                    <p class="font-medium">✅ Copied to Clipboard!</p>
                                                    <p class="text-sm mt-1">Now paste in Google Docs: <strong>Edit → Paste special → Paste from markdown</strong></p>
                                                </div>
                                            `;
                                            
                                            // Also show floating notification
                                            const notification = document.createElement('div');
                                            notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #22c55e; color: white; padding: 16px 24px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 9999; font-weight: 500;';
                                            notification.textContent = '✅ Activity summary copied!';
                                            document.body.appendChild(notification);
                                            
                                            // Fade out notification
                                            setTimeout(() => {
                                                notification.style.transition = 'opacity 0.5s';
                                                notification.style.opacity = '0';
                                                setTimeout(() => notification.remove(), 500);
                                            }, 2500);
                                            
                                            // Clear status after 3 seconds
                                            setTimeout(() => {
                                                statusDiv.innerHTML = '';
                                            }, 3000);
                                        } else {
                                            // Show error status
                                            statusDiv.innerHTML = `
                                                <div class="mt-2 bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-lg">
                                                    <p class="font-medium">❌ Copy Failed</p>
                                                    <p class="text-sm">Please select and copy the text manually.</p>
                                                </div>
                                            `;
                                            
                                            setTimeout(() => {
                                                statusDiv.innerHTML = '';
                                            }, 3000);
                                        }
                                    });
                                }}
                                className="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 text-sm font-medium"
                            >
                                📋 Copy Activity Summary
                            </button>
                            <div id="copyStatus"></div>
                        </div>
                    </div>

                    <div className="text-center space-x-4">
                        <button
                            onClick={resetActivity}
                            className="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors"
                        >
                            Reset Activity
                        </button>
                        
                        <button
                            onClick={() => window.location.href = 'problems-activity-3A.html'}
                            className="bg-orange-500 text-white px-8 py-3 rounded-lg hover:bg-orange-600 transition-colors font-semibold"
                        >
                            Continue to Next Activity
                        </button>
                    </div>
                </div>
            );
            
            return (
                <div className="max-w-4xl mx-auto p-5 bg-gradient-to-br from-orange-100 to-orange-200 min-h-screen">
                    {/* Header */}
                    <div className="bg-white rounded-lg shadow-lg p-4 mb-4">
                        <div className="flex justify-between items-center w-full mb-3">
                            <a 
                                href="index.html" 
                                className="inline-flex items-center text-orange-600 hover:text-orange-700 transition-colors text-sm font-medium"
                            >
                                <span className="mr-1">←</span> Back to Workshop
                            </a>
                            <a 
                                href="../index.html" 
                                className="inline-flex items-center text-gray-600 hover:text-orange-700 transition-colors text-sm font-medium"
                            >
                                All GTM Workshops <span className="ml-1">↑</span>
                            </a>
                        </div>
                        <div className="flex items-center justify-between mb-3">
                            <h1 
                                className={`text-2xl font-bold text-gray-800 ${devMode ? 'text-orange-600' : ''} cursor-pointer select-none`}
                                onDoubleClick={toggleDevMode}
                                title="Double-click to toggle dev mode"
                            >
                                Activity 2: Market Landing Zone Analysis {devMode && '🔧'}
                            </h1>
                        </div>
                        
                        {/* Dev Mode Controls */}
                        {devMode && (
                            <div className="mb-3 pb-3 border-b border-orange-200">
                                <div className="flex items-center justify-between">
                                    <span className="text-xs text-orange-600 font-medium">🔧 Dev Mode Active</span>
                                    <button
                                        onClick={devFillData}
                                        disabled={devFillLoading}
                                        className="bg-orange-500 text-white px-3 py-1 rounded text-xs hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        {devFillLoading ? '⏳ Loading...' : '📝 Fill Test Data'}
                                    </button>
                                </div>
                            </div>
                        )}
                        
                        {/* Progress indicator */}
                        <div className="flex items-center space-x-4">
                            <div className={`flex items-center space-x-2 ${currentStep >= 1 ? 'text-orange-600' : 'text-gray-400'}`}>
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentStep >= 1 ? 'bg-orange-500 text-white' : 'bg-gray-200'}`}>
                                    1
                                </div>
                                <span className="font-semibold">Map Market</span>
                            </div>
                            <div className="flex-1 h-1 bg-gray-200 rounded">
                                <div className={`h-full bg-orange-500 rounded transition-all duration-300 ${
                                    currentStep === 1 ? 'w-0' : currentStep === 2 ? 'w-1/3' : currentStep === 3 ? 'w-2/3' : 'w-full'
                                }`}></div>
                            </div>
                            <div className={`flex items-center space-x-2 ${currentStep >= 2 ? 'text-orange-600' : 'text-gray-400'}`}>
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentStep >= 2 ? 'bg-orange-500 text-white' : 'bg-gray-200'}`}>
                                    2
                                </div>
                                <span className="font-semibold">Strategic Entry</span>
                            </div>
                            <div className="flex-1 h-1 bg-gray-200 rounded">
                                <div className={`h-full bg-orange-500 rounded transition-all duration-300 ${
                                    currentStep <= 2 ? 'w-0' : currentStep === 3 ? 'w-1/2' : 'w-full'
                                }`}></div>
                            </div>
                            <div className={`flex items-center space-x-2 ${currentStep >= 3 ? 'text-orange-600' : 'text-gray-400'}`}>
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentStep >= 3 ? 'bg-orange-500 text-white' : 'bg-gray-200'}`}>
                                    3
                                </div>
                                <span className="font-semibold">Justification</span>
                            </div>
                            <div className="flex-1 h-1 bg-gray-200 rounded">
                                <div className={`h-full bg-orange-500 rounded transition-all duration-300 ${currentStep >= 4 ? 'w-full' : 'w-0'}`}></div>
                            </div>
                            <div className={`flex items-center space-x-2 ${currentStep >= 4 ? 'text-orange-600' : 'text-gray-400'}`}>
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentStep >= 4 ? 'bg-orange-500 text-white' : 'bg-gray-200'}`}>
                                    4
                                </div>
                                <span className="font-semibold">Summary</span>
                            </div>
                        </div>
                    </div>

                    {/* Removed ImportSection - using embedded test data instead */}

                    {/* Main Content */}
                    <div className="bg-white rounded-lg shadow-lg p-5 relative">
                        <button
                            onClick={resetActivity}
                            className="absolute -top-2 -right-2 w-8 h-8 bg-gray-200 hover:bg-orange-500 hover:text-white rounded-full flex items-center justify-center transition-all duration-200 text-gray-600"
                            title="Reset Activity"
                        >
                            <span className="text-lg font-bold">↻</span>
                        </button>

                        {currentStep === 1 && renderStep1()}
                        {currentStep === 2 && renderStep2()}
                        {currentStep === 3 && renderStep3()}
                        {currentStep === 4 && renderStep4()}
                        
                        {/* Removed ExportSection - using markdown export instead */}
                    </div>

                    {/* Footer decoration */}
                    <div className="mt-4 text-center">
                        <div className="w-12 h-12 mx-auto bg-white bg-opacity-30 rounded-full flex items-center justify-center">
                            <div className="w-8 h-8 border-4 border-white border-opacity-50 rounded-full"></div>
                        </div>
                    </div>
                </div>
            );
        };

        // Get the container element
        const container = document.getElementById('root');

        // Create a root
        const root = ReactDOM.createRoot(container);

        // Render the app
        root.render(<MarketLandingZoneAnalysis />);
    </script>
</body>
</html>