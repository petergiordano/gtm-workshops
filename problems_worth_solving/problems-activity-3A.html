<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problem Scoring Worksheet - Day 1</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
        }
        .lucide-icon {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Test Data from test_data/problems-activity-3A.json -->
    <script type="application/json" id="testData">
    {
      "problemStatement": "Development teams struggle to prevent API failures before they impact customers. Current monitoring solutions are reactive, not predictive, leading to significant costs—approximately $100,000 per hour in lost revenue for each failure and high operational costs due to downtime and manual interventions. This negatively impacts overall profitability and operational efficiency.",
      "urgencyScore": 5,
      "urgencyEvidence": "API failures cost $100k/hr. Teams need immediate alerts, and companies where API failures cost $100k+/hour are prioritizing systems ensuring business continuity. This indicates a clear and immediate pain point.",
      "importanceScore": 5,
      "importanceEvidence": "API failures significantly affect revenue and reputation, and reducing API failure-related operational costs is a clear, immediate pain point for target customers. The problem impacts overall profitability and operational efficiency and is visible at the CTO-level.",
      "valueScore": 5,
      "valueEvidence": "Posh AMP offers significant business value, including achieving up to a 50% reduction in system failures, leading to an estimated 30% improved MTBF and $500K in annual OpEx savings. It also aims for a 75% increase in the Incident Automation Rate, reducing operational costs by up to 30% and speeding incident response by 75%. There is a clear budget for monitoring, and a strong ROI case based on downtime costs.",
      "marketGapScore": 5,
      "marketGapEvidence": "Few predictive solutions exist in the market, and traditional API monitoring tools are purely reactive, lacking predictive capabilities. There is a rising focus on business resilience, and companies are prioritizing systems that ensure business continuity.",
      "accessibilityScore": 4,
      "accessibilityEvidence": "Development teams are easy to identify and are willing to try new tools. The target customers are mid to large-sized companies with modern API infrastructure and established DevOps teams. Posh AMP is designed to integrate seamlessly across multiple platforms and tools, providing familiar context while differentiating through its novel predictive approach.",
      "currentStep": 3
    }
    </script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Removed Progress Code System - using embedded test data instead

        // Icon components
        const AlertTriangle = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/>
                <path d="M12 9v4"/>
                <path d="M12 17h.01"/>
            </svg>
        );

        const CheckCircle = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22,4 12,14.01 9,11.01"/>
            </svg>
        );

        const Trophy = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
                <path d="M4 22h16"/>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
            </svg>
        );

        const Activity = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
        );

        const Timer = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
            </svg>
        );

        const FileText = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14,2 14,8 20,8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <line x1="10" y1="9" x2="8" y2="9"/>
            </svg>
        );

        const Download = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
        );

        const HelpCircle = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
        );

        const X = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );

        const AlertCircle = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
        );

        // Removed ImportSection and ExportSection components - using embedded test data instead

        // Word count and validation utility
        const getWordCount = (text) => {
            return text.trim().split(/\s+/).filter(w => w.length > 0).length;
        };

        const renderWordCountFeedback = (text, minWords, fieldId) => {
            const wordCount = getWordCount(text);
            const isValid = wordCount >= minWords;
            
            return (
                <div className="flex justify-between items-center mt-2 text-sm">
                    <span className="text-gray-500">
                        (describe in {minWords}+ words)
                    </span>
                    {isValid ? (
                        <div className="flex items-center text-green-600">
                            <CheckCircle size={16} className="mr-1" />
                            <span>{wordCount} words</span>
                        </div>
                    ) : (
                        <span className="text-gray-400">
                            {wordCount} words
                        </span>
                    )}
                </div>
            );
        };

        const ProblemScoringWorksheet = () => {
            const [currentStep, setCurrentStep] = useState(1);
            const [problemStatement, setProblemStatement] = useState("");
            const [wordCount, setWordCount] = useState(0);
            const [scores, setScores] = useState({
                urgency: 0,
                importance: 0,
                value: 0,
                marketGap: 0,
                accessibility: 0
            });
            const [evidence, setEvidence] = useState({
                urgency: "",
                importance: "",
                value: "",
                marketGap: "",
                accessibility: ""
            });
            const [timeRemaining, setTimeRemaining] = useState(null);
            const [timerActive, setTimerActive] = useState(false);
            const [activityComplete, setActivityComplete] = useState(false);
            
            // Dev mode state
            const [devMode, setDevMode] = useState(false);
            const [devFillLoading, setDevFillLoading] = useState(false);

            // Reusable dev mode hook for loading test data
            const loadTestDataFromScript = (setters) => {
                try {
                    const dataEl = document.getElementById('testData');
                    if (dataEl) {
                        const data = JSON.parse(dataEl.textContent);
                        Object.entries(setters).forEach(([key, setter]) => {
                            if (data[key] !== undefined) {
                                setter(data[key]);
                            }
                        });
                        console.log('✅ Test data loaded successfully from script tag');
                        return true;
                    } else {
                        console.error('❌ Test data script tag not found');
                        return false;
                    }
                } catch (error) {
                    console.error('❌ Failed to parse test data:', error);
                    return false;
                }
            };

            // Dev fill function (uses embedded test data)
            const devFillData = () => {
                setDevFillLoading(true);
                try {
                    const testData = JSON.parse(document.getElementById('testData').textContent);
                    
                    // Fill all the form fields with test data
                    setProblemStatement(testData.problemStatement);
                    setScores({
                        urgency: testData.urgencyScore,
                        importance: testData.importanceScore,
                        value: testData.valueScore,
                        marketGap: testData.marketGapScore,
                        accessibility: testData.accessibilityScore
                    });
                    setEvidence({
                        urgency: testData.urgencyEvidence,
                        importance: testData.importanceEvidence,
                        value: testData.valueEvidence,
                        marketGap: testData.marketGapEvidence,
                        accessibility: testData.accessibilityEvidence
                    });
                    setCurrentStep(testData.currentStep || 3);
                    
                    console.log('✅ Dev data loaded successfully (from embedded test data)');
                } catch (error) {
                    console.error('❌ Failed to load dev data:', error);
                    alert(`Failed to load test data: ${error.message}`);
                } finally {
                    setDevFillLoading(false);
                }
            };

            // Toggle dev mode (double-click title)
            const toggleDevMode = () => {
                setDevMode(!devMode);
                console.log(devMode ? '🔒 Dev mode disabled' : '🔓 Dev mode enabled');
            };

            // Markdown export function for professional activity summary
            const generateMarkdownSummary = () => {
                const getScoreStatus = (score) => {
                    if (score >= 4) return `${score}/5 - Strong 🟢`;
                    if (score >= 3) return `${score}/5 - Moderate 🟡`;
                    return `${score}/5 - Weak 🔴`;
                };
                
                const problemQuality = meetsThreshold() ? 'High-Quality Problem 🟢' : 'Needs Improvement 🟡';
                
                return `# Problems Worth Solving: Problem Scoring Assessment

### 📋 Executive Summary

**Activity Completion Status: 100%**

**Problem Quality Assessment: ${problemQuality}**
- Total Score: ${totalScore}/25
- Criteria meeting threshold: ${Object.values(scores).filter(score => score >= 4).length}/5
- Completion time: ${new Date().toLocaleDateString('en-US', { 
  weekday: 'long', 
  month: 'long', 
  day: 'numeric',
  year: 'numeric'
})}

---

### 🎯 Problem Statement

**Core Problem:**
${problemStatement || '[Problem statement not defined]'}

---

### 📊 Scoring Matrix Assessment

**Urgency Score:** ${getScoreStatus(scores.urgency)}
*${evidence.urgency || '[No evidence provided]'}*

**Importance Score:** ${getScoreStatus(scores.importance)}
*${evidence.importance || '[No evidence provided]'}*

**Value Potential Score:** ${getScoreStatus(scores.value)}
*${evidence.value || '[No evidence provided]'}*

**Market Gap Score:** ${getScoreStatus(scores.marketGap)}
*${evidence.marketGap || '[No evidence provided]'}*

**Accessibility Score:** ${getScoreStatus(scores.accessibility)}
*${evidence.accessibility || '[No evidence provided]'}*

### 🎯 Problem Viability Assessment

**Overall Scoring Analysis:**
- **Total Score**: ${totalScore}/25 ${totalScore >= 20 ? '(Exceeds threshold ✅)' : '(Below threshold ❌)'}
- **High-Priority Criteria**: Urgency (${scores.urgency}/5) & Value (${scores.value}/5) ${scores.urgency >= 4 && scores.value >= 4 ? '✅' : '❌'}
- **Strong Criteria Count**: ${Object.values(scores).filter(score => score >= 4).length}/5 ${Object.values(scores).filter(score => score >= 4).length >= 3 ? '(Sufficient ✅)' : '(Insufficient ❌)'}

**Recommendation:**
${meetsThreshold() ? 
  'This problem meets the criteria for a worth-solving problem. Proceed with solution development and market validation.' :
  'This problem requires strengthening in key areas before proceeding. Focus on improving urgency, importance, or market accessibility.'}

### 💡 Key Takeaway

A strong problem worth solving should score highly across multiple dimensions, with particular emphasis on urgency and value potential. Use this assessment to validate your problem before investing in solution development.

### 📅 Assessment Details

**Report Generated:** ${new Date().toLocaleDateString('en-US', { 
  weekday: 'long', 
  year: 'numeric', 
  month: 'long', 
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
  timeZoneName: 'short'
})}

**Activity:** Problem Scoring Worksheet (Activity 3 of 3)  
**Workshop Series:** Problems Worth Solving - GTM Program  
**Next Steps:** Continue to Finding Your Early Customers workshop

*This assessment validates your problem using a proven scoring framework. Use these insights to focus on problems with the highest potential for market success.*`;
            };

            // Total score calculation
            const totalScore = Object.values(scores).reduce((sum, score) => sum + score, 0);
            
            // Check if problem meets all thresholds
            const meetsThreshold = () => {
                // At least 4/5 on most criteria
                const criteriaAbove4 = Object.values(scores).filter(score => score >= 4).length;
                const highUrgencyAndValue = scores.urgency >= 4 && scores.value >= 4;
                const totalAbove20 = totalScore >= 20;
                
                return criteriaAbove4 >= 3 && highUrgencyAndValue && totalAbove20;
            };

            useEffect(() => {
                let interval;
                if (timerActive && timeRemaining > 0) {
                    interval = setInterval(() => {
                        setTimeRemaining(prev => prev - 1);
                    }, 1000);
                } else if (timeRemaining === 0) {
                    setTimerActive(false);
                }
                
                return () => clearInterval(interval);
            }, [timerActive, timeRemaining]);

            const startTimer = (seconds) => {
                setTimeRemaining(seconds);
                setTimerActive(true);
            };

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            };

            const handleScoreChange = (criterion, score) => {
                setScores(prev => ({
                    ...prev,
                    [criterion]: score
                }));
            };

            const handleEvidenceChange = (criterion, value) => {
                setEvidence(prev => ({
                    ...prev,
                    [criterion]: value
                }));
            };

            const handleProblemStatementChange = (e) => {
                const newStatement = e.target.value;
                setProblemStatement(newStatement);
                
                // Update word count using utility function
                setWordCount(getWordCount(newStatement));
            };

            const criteriaData = [
                {
                    id: "urgency",
                    title: "Urgency",
                    question: "How soon do they need this solved?",
                    description: "Problem must be solved now or very soon",
                    examples: [
                        "Problem occurs frequently (daily/weekly)",
                        "Significant cost or risk if unsolved",
                        "Regulatory deadline approaching"
                    ],
                    scoreDescriptions: {
                        1: "Can wait years to solve",
                        2: "Should be solved within a year",
                        3: "Needed in 3-6 months",
                        4: "Needed within weeks",
                        5: "Critical - needed immediately"
                    },
                    color: "bg-red-50 border-red-200 text-red-800"
                },
                {
                    id: "importance",
                    title: "Importance",
                    question: "What's the business impact if unsolved?",
                    description: "Problem significantly impacts business metrics",
                    examples: [
                        "Affects revenue or core operations",
                        "Creates compliance or security risk",
                        "Impacts customer experience measurably"
                    ],
                    scoreDescriptions: {
                        1: "Nice to have, minimal impact",
                        2: "Minor improvements to processes",
                        3: "Moderate efficiency/quality gains",
                        4: "Major operational improvement",
                        5: "Mission-critical, existential issue"
                    },
                    color: "bg-blue-50 border-blue-200 text-blue-800"
                },
                {
                    id: "value",
                    title: "Value",
                    question: "Will they pay? How much?",
                    description: "Customers willing to allocate budget",
                    examples: [
                        "Quantifiable ROI or cost savings",
                        "Budget exists or can be created",
                        "Value > cost by significant multiple"
                    ],
                    scoreDescriptions: {
                        1: "Unwilling to pay anything",
                        2: "Minimal budget (<$1K)",
                        3: "Moderate budget ($1K-$10K)",
                        4: "Significant budget ($10K-$100K)",
                        5: "Enterprise budget ($100K+)"
                    },
                    color: "bg-green-50 border-green-200 text-green-800"
                },
                {
                    id: "marketGap",
                    title: "Market Gap",
                    question: "How well do current solutions work?",
                    description: "Existing solutions are inadequate",
                    examples: [
                        "No solutions exist for this segment",
                        "Current options missing key capabilities",
                        "Alternatives too complex or expensive"
                    ],
                    scoreDescriptions: {
                        1: "Perfect solutions already exist",
                        2: "Good solutions with minor gaps",
                        3: "Partial solutions with clear limitations",
                        4: "Poor solutions with major drawbacks",
                        5: "No viable solutions exist"
                    },
                    color: "bg-purple-50 border-purple-200 text-purple-800"
                },
                {
                    id: "accessibility",
                    title: "Accessibility",
                    question: "Can you reach these customers?",
                    description: "Target customers are identifiable and reachable",
                    examples: [
                        "Clear way to identify prospects",
                        "Established marketing/sales channels",
                        "Reasonable customer acquisition cost"
                    ],
                    scoreDescriptions: {
                        1: "Cannot identify or reach customers",
                        2: "Hard to identify, expensive to reach",
                        3: "Can identify, but reach is challenging",
                        4: "Identifiable with established channels",
                        5: "Highly targetable with low CAC"
                    },
                    color: "bg-yellow-50 border-yellow-200 text-yellow-800"
                }
            ];

            const nextStep = () => setCurrentStep(prev => Math.min(prev + 1, 3));
            const prevStep = () => setCurrentStep(prev => Math.max(prev - 1, 1));

            const resetActivity = () => {
                setProblemStatement("");
                setWordCount(0);
                setScores({
                    urgency: 0,
                    importance: 0,
                    value: 0,
                    marketGap: 0,
                    accessibility: 0
                });
                setEvidence({
                    urgency: "",
                    importance: "",
                    value: "",
                    marketGap: "",
                    accessibility: ""
                });
                setCurrentStep(1);
                setTimeRemaining(null);
                setTimerActive(false);
            };

            const isStepComplete = () => {
                if (currentStep === 1) {
                    return getWordCount(problemStatement) >= 5;
                }
                if (currentStep === 2) {
                    // Check if the user has assigned any score (1-5) to all criteria
                    const allScored = Object.keys(criteriaData).length === 
                                      Object.keys(scores).filter(key => scores[key] >= 1).length;
                    
                    // Check if all criteria have minimum evidence (word-based)
                    const allEvidence = Object.keys(criteriaData).length === 
                                        Object.keys(evidence).filter(key => getWordCount(evidence[key]) >= 3).length;
                                        
                    return allScored && allEvidence;
                }
                return true;
            };

            const renderStep1 = () => (
                <div className="space-y-6">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Define Your Problem Statement
                        </h3>
                        <p className="text-gray-600 text-sm">
                            Clearly articulate the problem you're solving before evaluating it
                        </p>
                    </div>

                    <div className="bg-white border-2 border-gray-200 rounded-lg p-6">
                        <label className="block text-gray-700 font-medium mb-2">
                            Problem Statement:
                        </label>
                        <p className="text-gray-500 text-sm mb-3">
                            A good problem statement describes: WHO has the problem, WHAT the problem is, and WHY it matters.
                        </p>
                        <textarea
                            value={problemStatement}
                            onChange={handleProblemStatementChange}
                            placeholder="Example: Development teams at fast-growing tech companies struggle to prevent API failures before they impact customers, leading to lost revenue and damaged reputation."
                            className="w-full h-32 p-4 border border-gray-300 rounded-lg resize focus:border-orange-500 focus:ring-2 focus:ring-orange-200 placeholder-gray-400"
                        />
                        
                        {renderWordCountFeedback(problemStatement, 5, 'problemStatement')}
                        
                        <div className="mt-4 flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-lg">
                            <div className="text-blue-500 mt-1">
                                <AlertTriangle size={20} />
                            </div>
                            <div>
                                <p className="text-blue-700 text-sm font-medium">Problem Statement Tips:</p>
                                <ul className="text-blue-600 text-sm mt-1 space-y-1">
                                    <li>• Be specific about who experiences this problem</li>
                                    <li>• Focus on the problem, not your solution</li>
                                    <li>• Include why this problem matters (impact)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div className="flex justify-between items-center">
                        <div className="flex items-center">
                            <Timer size={24} className="text-gray-500 mr-2" />
                            <div>
                                <button
                                    onClick={() => startTimer(180)} // 3 minutes
                                    className="text-gray-600 bg-gray-100 hover:bg-gray-200 transition-colors px-3 py-1 rounded-lg text-sm"
                                    disabled={timerActive}
                                >
                                    Start 3-Min Timer
                                </button>
                                {timerActive && (
                                    <span className="ml-3 font-mono text-orange-600 font-bold">
                                        {formatTime(timeRemaining)}
                                    </span>
                                )}
                            </div>
                        </div>
                        
                        <button
                            onClick={nextStep}
                            disabled={!isStepComplete()}
                            className={`px-6 py-2 rounded-lg text-white font-medium transition-colors ${
                                isStepComplete() 
                                    ? 'bg-orange-500 hover:bg-orange-600' 
                                    : 'bg-gray-300 cursor-not-allowed'
                            }`}
                        >
                            Score Your Problem →
                        </button>
                    </div>
                </div>
            );

            const renderStep2 = () => (
                <div className="space-y-6">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Score Your Problem on 5 Criteria
                        </h3>
                        <p className="text-gray-600 text-sm">
                            Rate each criterion on a scale of 1-5 (where 5 is highest) and provide evidence for your score
                        </p>
                    </div>

                    <div className="grid grid-cols-1 gap-6">
                        {criteriaData.map((criterion) => (
                            <div 
                                key={criterion.id} 
                                className={`border-2 rounded-lg p-5 ${criterion.color}`}
                            >
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 className="font-bold text-lg">{criterion.title}</h4>
                                        <p className="text-sm font-medium mt-1">{criterion.question}</p>
                                    </div>
                                    <div className="flex space-x-1">
                                        {[1, 2, 3, 4, 5].map((scoreValue) => (
                                            <button
                                                key={scoreValue}
                                                onClick={() => handleScoreChange(criterion.id, scoreValue)}
                                                className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all
                                                ${scores[criterion.id] === scoreValue 
                                                    ? 'bg-white text-orange-500 border-2 border-orange-500' 
                                                    : 'bg-white bg-opacity-50 hover:bg-white'
                                                }`}
                                                title={`Score ${scoreValue}: ${criterion.scoreDescriptions[scoreValue]}`}
                                            >
                                                {scoreValue}
                                            </button>
                                        ))}
                                        <span className="text-xs text-gray-500 self-center ml-1">(5 = highest)</span>
                                    </div>
                                </div>
                                
                                {scores[criterion.id] > 0 && (
                                    <div className="mb-4 p-3 bg-white bg-opacity-80 rounded-lg">
                                        <p className="font-medium text-sm">
                                            Score {scores[criterion.id]}: {criterion.scoreDescriptions[scores[criterion.id]]}
                                        </p>
                                    </div>
                                )}
                                
                                <div className="mb-4">
                                    <label className="block text-sm font-medium mb-2">
                                        Evidence for your score:
                                    </label>
                                    <textarea
                                        value={evidence[criterion.id]}
                                        onChange={(e) => handleEvidenceChange(criterion.id, e.target.value)}
                                        placeholder={`What specific evidence supports your ${criterion.title} score?`}
                                        className="w-full p-3 border border-gray-300 rounded-lg resize h-20 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 bg-white placeholder-gray-400"
                                    />
                                    {renderWordCountFeedback(evidence[criterion.id], 3, `evidence-${criterion.id}`)}
                                </div>
                                
                                <div className="text-sm space-y-1">
                                    <p className="font-medium">Key indicators of high {criterion.title}:</p>
                                    <ul className="space-y-1 ml-1">
                                        {criterion.examples.map((example, i) => (
                                            <li key={i} className="flex items-start">
                                                <span className="inline-block w-4 h-4 mt-0.5 mr-2 bg-white rounded-full flex items-center justify-center text-xs font-bold">•</span>
                                                {example}
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="bg-gray-50 border-2 border-gray-200 rounded-lg p-5">
                        <div className="flex justify-between items-center mb-4">
                            <h4 className="font-bold text-lg text-gray-800">Problem Score Summary</h4>
                            <div className="text-2xl font-bold text-orange-500">{totalScore}/25</div>
                        </div>
                        
                        <div className="space-y-2 mb-4">
                            {criteriaData.map(criterion => (
                                <div key={criterion.id} className="flex justify-between items-center">
                                    <span className="text-gray-700">{criterion.title}:</span>
                                    <div className="flex items-center">
                                        <span className={`font-bold ${scores[criterion.id] >= 4 ? 'text-green-600' : 'text-gray-600'}`}>
                                            {scores[criterion.id] || '-'}/5
                                        </span>
                                        {scores[criterion.id] >= 4 && (
                                            <CheckCircle size={16} className="text-green-500 ml-1" />
                                        )}
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        <div className="p-3 rounded-lg bg-blue-50 border border-blue-100">
                            <p className="text-sm text-blue-800 font-medium">Threshold for a Problem Worth Solving:</p>
                            <ul className="text-sm text-blue-700 mt-1 space-y-1">
                                <li className="flex items-center">
                                    <span className={`inline-block w-4 h-4 mr-2 rounded-full ${criteriaData.filter(c => scores[c.id] >= 4).length >= 3 ? 'bg-green-500' : 'bg-gray-300'}`}></span>
                                    Score of 4+ on at least 3 criteria
                                </li>
                                <li className="flex items-center">
                                    <span className={`inline-block w-4 h-4 mr-2 rounded-full ${scores.urgency >= 4 && scores.value >= 4 ? 'bg-green-500' : 'bg-gray-300'}`}></span>
                                    High Urgency (4+) AND High Value (4+)
                                </li>
                                <li className="flex items-center">
                                    <span className={`inline-block w-4 h-4 mr-2 rounded-full ${totalScore >= 20 ? 'bg-green-500' : 'bg-gray-300'}`}></span>
                                    Total score of 20 or higher
                                </li>
                            </ul>
                        </div>
                        
                        <div className="mt-3 text-center p-2 bg-gray-100 rounded-lg">
                            <p className="text-sm text-gray-600">All criteria scored on a scale of 1-5, where <span className="font-bold">5 is highest</span></p>
                        </div>
                    </div>

                    <div className="flex justify-between">
                        <button
                            onClick={prevStep}
                            className="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors"
                        >
                            ← Back
                        </button>
                        
                        <button
                            onClick={nextStep}
                            disabled={!isStepComplete()}
                            className={`px-6 py-2 rounded-lg text-white font-medium transition-colors ${
                                isStepComplete() 
                                    ? 'bg-orange-500 hover:bg-orange-600' 
                                    : 'bg-gray-300 cursor-not-allowed'
                            }`}
                        >
                            See Results →
                        </button>
                    </div>
                </div>
            );

            const renderStep3 = () => (
                <div className="space-y-6">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Problem Validation Results
                        </h3>
                        <p className="text-gray-600 text-sm">
                            Review your problem assessment and determine next steps
                        </p>
                    </div>

                    <div className={`border-2 rounded-lg p-6 ${
                        meetsThreshold() 
                            ? 'bg-green-50 border-green-500' 
                            : 'bg-yellow-50 border-yellow-500'
                    }`}>
                        <div className="flex justify-between items-start">
                            <div>
                                <h4 className={`text-xl font-bold mb-2 ${
                                    meetsThreshold() ? 'text-green-700' : 'text-yellow-700'
                                }`}>
                                    {meetsThreshold() 
                                        ? 'Validated: Problem Worth Solving!' 
                                        : 'Not Yet Validated: Needs More Work'
                                    }
                                </h4>
                                <p className={`text-sm ${
                                    meetsThreshold() ? 'text-green-600' : 'text-yellow-600'
                                }`}>
                                    Total Score: {totalScore}/25
                                </p>
                            </div>
                            <div className="text-4xl">
                                {meetsThreshold() 
                                    ? <Trophy size={40} className="text-green-500" /> 
                                    : <AlertTriangle size={40} className="text-yellow-500" />
                                }
                            </div>
                        </div>
                        
                        <div className="mt-6">
                            <h5 className={`font-bold mb-2 ${
                                meetsThreshold() ? 'text-green-700' : 'text-yellow-700'
                            }`}>Your Problem Statement:</h5>
                            <div className="p-4 bg-white rounded-lg border border-gray-200">
                                <p className="text-gray-800">{problemStatement}</p>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div className="border-2 border-gray-200 rounded-lg p-4 bg-white">
                            <h4 className="font-bold text-gray-800 mb-3 flex items-center">
                                <Activity size={18} className="text-orange-500 mr-2" />
                                Strengths
                            </h4>
                            <ul className="space-y-2">
                                {criteriaData
                                    .filter(c => scores[c.id] >= 4)
                                    .map(criterion => (
                                        <li key={criterion.id} className="flex items-start">
                                            <CheckCircle size={16} className="text-green-500 mt-0.5 mr-2 flex-shrink-0" />
                                            <div>
                                                <span className="font-medium">{criterion.title} ({scores[criterion.id]}/5):</span>
                                                <p className="text-sm text-gray-600">{evidence[criterion.id]}</p>
                                            </div>
                                        </li>
                                    ))}
                                {criteriaData.filter(c => scores[c.id] >= 4).length === 0 && (
                                    <li className="text-gray-500 italic text-sm">No criteria scored 4 or higher</li>
                                )}
                            </ul>
                        </div>
                        
                        <div className="border-2 border-gray-200 rounded-lg p-4 bg-white">
                            <h4 className="font-bold text-gray-800 mb-3 flex items-center">
                                <Activity size={18} className="text-orange-500 mr-2" />
                                Areas to Improve
                            </h4>
                            <ul className="space-y-2">
                                {criteriaData
                                    .filter(c => scores[c.id] < 4)
                                    .map(criterion => (
                                        <li key={criterion.id} className="flex items-start">
                                            <AlertTriangle size={16} className="text-yellow-500 mt-0.5 mr-2 flex-shrink-0" />
                                            <div>
                                                <span className="font-medium">{criterion.title} ({scores[criterion.id]}/5):</span>
                                                <p className="text-sm text-gray-600">{evidence[criterion.id] || "No evidence provided"}</p>
                                            </div>
                                        </li>
                                    ))}
                                {criteriaData.filter(c => scores[c.id] < 4).length === 0 && (
                                    <li className="text-gray-500 italic text-sm">All criteria scored 4 or higher!</li>
                                )}
                            </ul>
                        </div>
                    </div>

                    <div className={`rounded-lg p-5 ${
                        meetsThreshold() 
                            ? 'bg-green-50 border-2 border-green-200' 
                            : 'bg-yellow-50 border-2 border-yellow-200'
                    }`}>
                        <h4 className={`text-lg font-bold mb-3 ${
                            meetsThreshold() ? 'text-green-800' : 'text-yellow-800'
                        }`}>
                            Recommended Next Steps:
                        </h4>
                        
                        {meetsThreshold() ? (
                            <ul className="space-y-2 text-green-700">
                                <li className="flex items-start">
                                    <span className="inline-block w-5 h-5 bg-green-500 text-white rounded-full flex-shrink-0 flex items-center justify-center text-xs font-bold mr-2">1</span>
                                    <span>Continue with customer discovery interviews to validate your problem assessment</span>
                                </li>
                                <li className="flex items-start">
                                    <span className="inline-block w-5 h-5 bg-green-500 text-white rounded-full flex-shrink-0 flex items-center justify-center text-xs font-bold mr-2">2</span>
                                    <span>Begin developing your Early Customer Profile based on this validated problem</span>
                                </li>
                                <li className="flex items-start">
                                    <span className="inline-block w-5 h-5 bg-green-500 text-white rounded-full flex-shrink-0 flex items-center justify-center text-xs font-bold mr-2">3</span>
                                    <span>Start exploring solution concepts that directly address your validated problem</span>
                                </li>
                            </ul>
                        ) : (
                            <ul className="space-y-2 text-yellow-700">
                                <li className="flex items-start">
                                    <span className="inline-block w-5 h-5 bg-yellow-500 text-white rounded-full flex-shrink-0 flex items-center justify-center text-xs font-bold mr-2">1</span>
                                    <span>Revisit your problem statement to focus on a more urgent customer need</span>
                                </li>
                                <li className="flex items-start">
                                    <span className="inline-block w-5 h-5 bg-yellow-500 text-white rounded-full flex-shrink-0 flex items-center justify-center text-xs font-bold mr-2">2</span>
                                    <span>Conduct more customer interviews to find segments with higher urgency and value</span>
                                </li>
                                <li className="flex items-start">
                                    <span className="inline-block w-5 h-5 bg-yellow-500 text-white rounded-full flex-shrink-0 flex items-center justify-center text-xs font-bold mr-2">3</span>
                                    <span>Consider pivoting to an adjacent problem that better meets the validation criteria</span>
                                </li>
                            </ul>
                        )}
                    </div>

                    {/* Export Professional Report */}
                    <div className="bg-white border border-gray-300 rounded-lg p-4 mb-6">
                        <div className="flex items-center mb-3">
                            <FileText className="text-blue-600 mr-2" size={20} />
                            <h4 className="font-semibold text-gray-800">📄 Export Professional Report</h4>
                        </div>
                        
                        <p className="text-sm text-gray-600 mb-3">
                            Your problem scoring assessment has been formatted as a professional markdown report for easy sharing
                            and documentation.
                        </p>

                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
                            <h5 className="font-medium text-blue-800 mb-2">📌 Google Docs Instructions:</h5>
                            <ol className="text-sm text-blue-700 space-y-1">
                                <li>1. Click "Copy Activity Summary" below</li>
                                <li>2. Open Google Docs and create a new document</li>
                                <li>3. Go to <strong>Edit → Paste special → Paste from markdown</strong></li>
                                <li>4. Your report will appear with proper formatting!</li>
                            </ol>
                            <p className="text-xs text-blue-600 mt-2">
                                💡 <strong>Tip:</strong> "Paste from markdown" preserves all formatting including headers and sections.
                            </p>
                        </div>

                        <textarea
                            id="markdownSummary"
                            readOnly
                            className="w-full h-64 text-sm p-3 font-mono border border-gray-200 rounded-lg bg-gray-50 resize mb-3"
                            value={generateMarkdownSummary()}
                        />
                        
                        <div className="flex flex-col items-center">
                            <button
                                onClick={(event) => {
                                    // Copy to clipboard with fallback
                                    const copyToClipboard = async (text) => {
                                        try {
                                            // Try modern clipboard API first
                                            if (navigator.clipboard && navigator.clipboard.writeText) {
                                                await navigator.clipboard.writeText(text);
                                                return true;
                                            } else {
                                                // Fallback for older browsers or file:// protocol
                                                const textArea = document.createElement('textarea');
                                                textArea.value = text;
                                                textArea.style.position = 'fixed';
                                                textArea.style.left = '-999999px';
                                                document.body.appendChild(textArea);
                                                textArea.focus();
                                                textArea.select();
                                                
                                                try {
                                                    const successful = document.execCommand('copy');
                                                    document.body.removeChild(textArea);
                                                    return successful;
                                                } catch (err) {
                                                    document.body.removeChild(textArea);
                                                    return false;
                                                }
                                            }
                                        } catch (err) {
                                            console.error('Copy failed:', err);
                                            return false;
                                        }
                                    };

                                    const el = document.getElementById('markdownSummary');
                                    const statusDiv = document.getElementById('copyStatus');
                                    
                                    copyToClipboard(el.value).then((success) => {
                                        if (success) {
                                            // Show success status below button
                                            statusDiv.innerHTML = `
                                                <div class="mt-2 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded-lg">
                                                    <p class="font-medium">✅ Copied to Clipboard!</p>
                                                    <p class="text-sm mt-1">Now paste in Google Docs: <strong>Edit → Paste special → Paste from markdown</strong></p>
                                                </div>
                                            `;
                                            
                                            // Also show floating notification
                                            const notification = document.createElement('div');
                                            notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #22c55e; color: white; padding: 16px 24px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 9999; font-weight: 500;';
                                            notification.textContent = '✅ Activity summary copied!';
                                            document.body.appendChild(notification);
                                            
                                            // Fade out notification
                                            setTimeout(() => {
                                                notification.style.transition = 'opacity 0.5s';
                                                notification.style.opacity = '0';
                                                setTimeout(() => notification.remove(), 500);
                                            }, 2500);
                                            
                                            // Clear status after 3 seconds
                                            setTimeout(() => {
                                                statusDiv.innerHTML = '';
                                            }, 3000);
                                        } else {
                                            // Show error status
                                            statusDiv.innerHTML = `
                                                <div class="mt-2 bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-lg">
                                                    <p class="font-medium">❌ Copy Failed</p>
                                                    <p class="text-sm">Please select and copy the text manually.</p>
                                                </div>
                                            `;
                                            
                                            setTimeout(() => {
                                                statusDiv.innerHTML = '';
                                            }, 3000);
                                        }
                                    });
                                }}
                                className="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 text-sm font-medium"
                            >
                                📋 Copy Activity Summary
                            </button>
                            <div id="copyStatus"></div>
                        </div>
                    </div>

                    <div className="flex justify-between items-center mt-6 gap-4">
                        <button
                            onClick={resetActivity}
                            className="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors flex-shrink-0"
                        >
                            Reset Activity
                        </button>
                        
                        <button
                            onClick={() => window.location.href = '../index.html'}
                            className="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors font-semibold flex-shrink-0"
                        >
                            Back to All Workshops
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="max-w-[1200px] mx-auto p-5 bg-gradient-to-br from-orange-100 to-orange-200 min-h-screen">
                    {/* Header */}
                    <div className="bg-white rounded-lg shadow-lg p-4 mb-4">
                        <div className="flex justify-between items-center w-full mb-3">
                            <a 
                                href="index.html" 
                                className="inline-flex items-center text-orange-600 hover:text-orange-700 transition-colors text-sm font-medium"
                            >
                                <span className="mr-1">←</span> Back to Workshop
                            </a>
                            <a 
                                href="../index.html" 
                                className="inline-flex items-center text-gray-600 hover:text-orange-700 transition-colors text-sm font-medium"
                            >
                                All GTM Workshops <span className="ml-1">↑</span>
                            </a>
                        </div>
                        <div className="flex items-center justify-between mb-3">
                            <h1 
                                className={`text-2xl font-bold text-gray-800 ${devMode ? 'text-orange-600' : ''} cursor-pointer select-none`}
                                onDoubleClick={toggleDevMode}
                                title="Double-click to toggle dev mode"
                            >
                                Activity 3: Problem Scoring Worksheet {devMode && '🔧'}
                            </h1>
                            <button
                                onClick={resetActivity}
                                className="text-sm text-gray-500 hover:text-orange-500 transition-colors"
                                title="Reset Activity"
                            >
                                Reset
                            </button>
                        </div>
                        
                        {/* Dev Mode Controls */}
                        {devMode && (
                            <div className="mb-3 pb-3 border-b border-orange-200">
                                <div className="flex items-center justify-between">
                                    <span className="text-xs text-orange-600 font-medium">🔧 Dev Mode Active</span>
                                    <button
                                        onClick={devFillData}
                                        disabled={devFillLoading}
                                        className="bg-orange-500 text-white px-3 py-1 rounded text-xs hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        {devFillLoading ? '⏳ Loading...' : '📝 Fill Test Data'}
                                    </button>
                                </div>
                            </div>
                        )}
                        
                        {/* Progress indicator */}
                        <div className="flex items-center space-x-4">
                            <div className={`flex items-center space-x-2 ${currentStep >= 1 ? 'text-orange-600' : 'text-gray-400'}`}>
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentStep >= 1 ? 'bg-orange-500 text-white' : 'bg-gray-200'}`}>
                                    1
                                </div>
                                <span className="font-semibold">Define Problem</span>
                            </div>
                            <div className="flex-1 h-1 bg-gray-200 rounded">
                                <div className={`h-full bg-orange-500 rounded transition-all duration-300 ${
                                    currentStep >= 3 ? 'w-full' : currentStep >= 2 ? 'w-1/2' : 'w-0'
                                }`}></div>
                            </div>
                            <div className={`flex items-center space-x-2 ${currentStep >= 2 ? 'text-orange-600' : 'text-gray-400'}`}>
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentStep >= 2 ? 'bg-orange-500 text-white' : 'bg-gray-200'}`}>
                                    2
                                </div>
                                <span className="font-semibold">Score Criteria</span>
                            </div>
                            <div className="flex-1 h-1 bg-gray-200 rounded">
                                <div className={`h-full bg-orange-500 rounded transition-all duration-300 ${currentStep >= 3 ? 'w-full' : 'w-0'}`}></div>
                            </div>
                            <div className={`flex items-center space-x-2 ${currentStep >= 3 ? 'text-orange-600' : 'text-gray-400'}`}>
                                <div className={`w-8 h-8 rounded-full flex items-center justify-center ${currentStep >= 3 ? 'bg-orange-500 text-white' : 'bg-gray-200'}`}>
                                    3
                                </div>
                                <span className="font-semibold">Review Results</span>
                            </div>
                        </div>
                    </div>

                    {/* Removed ImportSection - using embedded test data instead */}

                    {/* Main Content */}
                    <div className="bg-white rounded-lg shadow-lg p-6 relative">
                        {currentStep === 1 && renderStep1()}
                        {currentStep === 2 && renderStep2()}
                        {currentStep === 3 && renderStep3()}
                        
                        {/* Removed ExportSection - using markdown export instead */}
                    </div>

                    {/* Footer decoration */}
                    <div className="mt-4 text-center">
                        <div className="w-12 h-12 mx-auto bg-white bg-opacity-30 rounded-full flex items-center justify-center">
                            <div className="w-8 h-8 border-4 border-white border-opacity-50 rounded-full"></div>
                        </div>
                    </div>
                </div>
            );
        };

        // Get the container element
        const container = document.getElementById('root');

        // Create a root
        const root = ReactDOM.createRoot(container);

        // Render the app
        root.render(<ProblemScoringWorksheet />);
    </script>
</body>
</html>