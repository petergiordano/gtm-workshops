<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundation and Goals Assessment - Market Entry Readiness</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
        }
        .lucide-icon {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
        }
        /* Laptop-optimized textarea styles */
        .laptop-textarea {
            min-height: 80px;
            max-height: 120px;
            transition: max-height 0.3s ease;
            resize: none;
        }
        .laptop-textarea:focus {
            max-height: 200px;
        }
        /* Side-by-side responsive layout */
        @media (max-width: 768px) {
            .laptop-grid {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Test Data from test_data/market-entry-activity-1A.json -->
    <script type="application/json" id="testData">
    {
      "currentPosition": {
        "uniqueAttributes": {
          "localStrength": "Proprietary ML-powered predictive analytics engine that prevents API failures before they occur",
          "globalLimitation": "No established brand recognition in competitive US market dominated by Datadog and New Relic"
        },
        "marketKnowledge": {
          "localStrength": "Deep understanding of Japanese enterprise API infrastructure and relationship-based sales cycles",
          "globalLimitation": "Limited knowledge of US ROI-focused buying processes and fast adoption cycles"
        },
        "resources": {
          "localStrength": "Strong technical team with proven API monitoring expertise and $2M in local revenue",
          "globalLimitation": "Limited financial resources ($1.25M budget) for aggressive US market entry against well-funded competitors"
        },
        "networkRelationships": {
          "localStrength": "Established partnerships with major Japanese cloud providers and system integrators",
          "globalLimitation": "No existing relationships with US cloud providers, DevOps platforms, or enterprise prospects"
        },
        "infrastructure": {
          "localStrength": "Mature product with proven reliability in Japanese market and Tokyo-based support operations",
          "globalLimitation": "Lack of US-based infrastructure, sales team, and multi-timezone support capabilities"
        }
      },
      "sixMonthMetrics": [
        "US enterprise pilots",
        "Technical integrations",
        "Sales partnerships"
      ],
      "sixMonthTargets": [
        "3 Fortune 500 pilot customers",
        "5 major platform integrations",
        "2 US channel partner agreements"
      ],
      "twelveMonthMetrics": [
        "Annual Recurring Revenue (ARR)",
        "Customer acquisition",
        "Product-market fit indicators"
      ],
      "twelveMonthTargets": [
        "$1.5M ARR from US market",
        "15 enterprise customers",
        "95% customer satisfaction (NPS >50)"
      ],
      "activeTab": "6months",
      "currentStep": 1
    }
    </script>

    <script type="text/babel">
        const { useState, useEffect } = React;


        // Icon components
        const Building = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect width="16" height="20" x="4" y="2" rx="2" ry="2"/>
                <path d="M9 22v-4h6v4"/>
                <path d="M8 6h.01"/>
                <path d="M16 6h.01"/>
                <path d="M12 6h.01"/>
                <path d="M12 10h.01"/>
                <path d="M12 14h.01"/>
                <path d="M16 10h.01"/>
                <path d="M16 14h.01"/>
                <path d="M8 10h.01"/>
                <path d="M8 14h.01"/>
            </svg>
        );

        const Target = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <circle cx="12" cy="12" r="6"/>
                <circle cx="12" cy="12" r="2"/>
            </svg>
        );

        const TrendingUp = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="22,7 13.5,15.5 8.5,10.5 2,17"/>
                <polyline points="16,7 22,7 22,13"/>
            </svg>
        );

        const CheckCircle = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22,4 12,14.01 9,11.01"/>
            </svg>
        );

        const AlertTriangle = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                <line x1="12" y1="9" x2="12" y2="13"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
        );

        const Clock = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
            </svg>
        );

        const FileText = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14,2 14,8 20,8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10,9 9,9 8,9"/>
            </svg>
        );

        const Copy = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
                <path d="M4 16c-1.1 0-2-.9-2 2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
            </svg>
        );

        const ChevronDown = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="6,9 12,15 18,9"/>
            </svg>
        );

        const ChevronRight = ({ size = 20, className = "" }) => (
            <svg className={`lucide-icon ${className}`} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="9,18 15,12 9,6"/>
            </svg>
        );

        const MarketEntryActivity1 = () => {
            const [currentStep, setCurrentStep] = useState(1);
            
            // Current Position Assessment state - 5 elements structure
            const [currentPosition, setCurrentPosition] = useState({
                uniqueAttributes: { localStrength: '', globalLimitation: '' },
                marketKnowledge: { localStrength: '', globalLimitation: '' },
                resources: { localStrength: '', globalLimitation: '' },
                networkRelationships: { localStrength: '', globalLimitation: '' },
                infrastructure: { localStrength: '', globalLimitation: '' }
            });
            
            // Success Metrics state
            const [activeTab, setActiveTab] = useState('6months');
            const [sixMonthMetrics, setSixMonthMetrics] = useState(['', '', '']);
            const [sixMonthTargets, setSixMonthTargets] = useState(['', '', '']);
            const [twelveMonthMetrics, setTwelveMonthMetrics] = useState(['', '', '']);
            const [twelveMonthTargets, setTwelveMonthTargets] = useState(['', '', '']);
            
            // Dev mode state
            const [devMode, setDevMode] = useState(false);
            const [devFillLoading, setDevFillLoading] = useState(false);

            // Reset function
            const resetActivity = () => {
                setCurrentPosition({
                    uniqueAttributes: { localStrength: '', globalLimitation: '' },
                    marketKnowledge: { localStrength: '', globalLimitation: '' },
                    resources: { localStrength: '', globalLimitation: '' },
                    networkRelationships: { localStrength: '', globalLimitation: '' },
                    infrastructure: { localStrength: '', globalLimitation: '' }
                });
                setSixMonthMetrics(['', '', '']);
                setSixMonthTargets(['', '', '']);
                setTwelveMonthMetrics(['', '', '']);
                setTwelveMonthTargets(['', '', '']);
                setCurrentStep(1);
                setActiveTab('6months');
            };

            // Reusable dev mode hook for loading test data
            const loadTestDataFromScript = (setters) => {
                try {
                    const dataEl = document.getElementById('testData');
                    if (dataEl) {
                        const data = JSON.parse(dataEl.textContent);
                        Object.entries(setters).forEach(([key, setter]) => {
                            if (data[key] !== undefined) {
                                setter(data[key]);
                            }
                        });
                        console.log('✅ Test data loaded successfully from script tag');
                        return true;
                    } else {
                        console.error('❌ Test data script tag not found');
                        return false;
                    }
                } catch (error) {
                    console.error('❌ Failed to parse test data:', error);
                    return false;
                }
            };

            // Dev fill function (uses embedded test data)
            const devFillData = () => {
                setDevFillLoading(true);
                try {
                    const testData = JSON.parse(document.getElementById('testData').textContent);
                    
                    setCurrentPosition(testData.currentPosition);
                    setSixMonthMetrics(testData.sixMonthMetrics);
                    setSixMonthTargets(testData.sixMonthTargets);
                    setTwelveMonthMetrics(testData.twelveMonthMetrics);
                    setTwelveMonthTargets(testData.twelveMonthTargets);
                    setActiveTab(testData.activeTab || '6months');
                    setCurrentStep(testData.currentStep || 1);
                    
                    console.log('✅ Dev data loaded successfully (from embedded test data)');
                } catch (error) {
                    console.error('❌ Failed to load dev data:', error);
                    alert(`Failed to load test data: ${error.message}`);
                } finally {
                    setDevFillLoading(false);
                }
            };

            // Toggle dev mode (double-click title)
            const toggleDevMode = () => {
                setDevMode(!devMode);
                console.log(devMode ? '🔒 Dev mode disabled' : '🔓 Dev mode enabled');
            };

            // Validation helpers
            const isSection1Complete = () => {
                // Count how many elements have both fields filled with 10+ words
                const elements = Object.values(currentPosition);
                const completedElements = elements.filter(element => {
                    const strengthWords = element.localStrength.trim().split(/\s+/).filter(w => w.length > 0).length;
                    const limitationWords = element.globalLimitation.trim().split(/\s+/).filter(w => w.length > 0).length;
                    return strengthWords >= 10 && limitationWords >= 10;
                }).length;
                
                // Require at least 4 of 5 elements to be complete
                return completedElements >= 4;
            };

            const isSection2Complete = () => {
                const valid6MonthPairs = sixMonthMetrics.filter((m, i) => 
                    m.trim().length >= 5 && sixMonthTargets[i].trim().length >= 5
                ).length;
                const valid12MonthPairs = twelveMonthMetrics.filter((m, i) => 
                    m.trim().length >= 5 && twelveMonthTargets[i].trim().length >= 5
                ).length;
                return valid6MonthPairs >= 2 && valid12MonthPairs >= 2;
            };

            const isActivityComplete = () => isSection1Complete() && isSection2Complete();

            // Helper function to update current position
            const updateCurrentPosition = (element, field, value) => {
                setCurrentPosition(prev => ({
                    ...prev,
                    [element]: {
                        ...prev[element],
                        [field]: value
                    }
                }));
            };

            // Array update helpers
            const updateArrayItem = (arr, setArr, index, value) => {
                const newArr = [...arr];
                newArr[index] = value;
                setArr(newArr);
            };



            const renderSection1 = () => {
                // Define the 5 elements with their display names
                const elements = [
                    { key: 'uniqueAttributes', name: 'Unique Attributes', 
                      strengthPlaceholder: 'e.g., Proprietary technology, unique product features, or specialized expertise',
                      limitationPlaceholder: 'e.g., No brand recognition, technology not adapted for global markets' },
                    { key: 'marketKnowledge', name: 'Market Knowledge',
                      strengthPlaceholder: 'e.g., Deep understanding of local customer needs and buying behaviors',
                      limitationPlaceholder: 'e.g., Limited knowledge of international markets, regulations, or cultures' },
                    { key: 'resources', name: 'Resources',
                      strengthPlaceholder: 'e.g., Strong financial position, skilled team, or operational excellence',
                      limitationPlaceholder: 'e.g., Limited budget for expansion, lack of international expertise' },
                    { key: 'networkRelationships', name: 'Network/Relationships',
                      strengthPlaceholder: 'e.g., Established local partnerships, strong customer relationships',
                      limitationPlaceholder: 'e.g., No international partnerships, limited global connections' },
                    { key: 'infrastructure', name: 'Infrastructure',
                      strengthPlaceholder: 'e.g., Robust local operations, proven systems and processes',
                      limitationPlaceholder: 'e.g., No global infrastructure, limited multi-timezone support' }
                ];

                // Count completed elements
                const completedElements = elements.filter(element => {
                    const el = currentPosition[element.key];
                    const strengthWords = el.localStrength.trim().split(/\s+/).filter(w => w.length > 0).length;
                    const limitationWords = el.globalLimitation.trim().split(/\s+/).filter(w => w.length > 0).length;
                    return strengthWords >= 10 && limitationWords >= 10;
                }).length;

                return (
                    <div className="space-y-4">
                        <div className="text-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800 mb-2">
                                Current Position Assessment
                            </h3>
                            <p className="text-gray-600 text-sm">
                                Evaluate your current state across 5 key elements for global market expansion
                            </p>
                        </div>

                        {/* Progress indicator */}
                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-3">
                            <p className="text-blue-700 text-sm">
                                <strong>Progress:</strong> Complete at least 4 of 5 elements (10+ words per field) to proceed.
                                Current: {completedElements}/5 elements complete
                            </p>
                        </div>

                        {/* Table structure */}
                        <div className="overflow-x-auto">
                            <table className="w-full border-collapse">
                                <thead>
                                    <tr className="bg-gray-100">
                                        <th className="border border-gray-300 p-3 text-left font-semibold text-gray-800 w-1/5">
                                            Elements
                                        </th>
                                        <th className="border border-gray-300 p-3 text-left font-semibold text-green-800 w-2/5">
                                            <div className="flex items-center">
                                                <CheckCircle className="text-green-600 mr-2" size={18} />
                                                Your Local Strengths
                                            </div>
                                        </th>
                                        <th className="border border-gray-300 p-3 text-left font-semibold text-orange-800 w-2/5">
                                            <div className="flex items-center">
                                                <AlertTriangle className="text-orange-600 mr-2" size={18} />
                                                Your Limitations for Global Markets
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {elements.map((element, index) => {
                                        const el = currentPosition[element.key];
                                        const strengthWords = el.localStrength.trim().split(/\s+/).filter(w => w.length > 0).length;
                                        const limitationWords = el.globalLimitation.trim().split(/\s+/).filter(w => w.length > 0).length;
                                        const isComplete = strengthWords >= 10 && limitationWords >= 10;
                                        
                                        return (
                                            <tr key={element.key} className={index % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
                                                <td className="border border-gray-300 p-3 font-medium text-gray-700">
                                                    {element.name}
                                                    {isComplete && <CheckCircle className="inline-block ml-2 text-green-500" size={16} />}
                                                </td>
                                                <td className="border border-gray-300 p-2">
                                                    <textarea
                                                        value={el.localStrength}
                                                        onChange={(e) => updateCurrentPosition(element.key, 'localStrength', e.target.value)}
                                                        placeholder={element.strengthPlaceholder}
                                                        className="w-full p-2 border border-gray-200 rounded text-sm resize-vertical min-h-[80px] focus:border-green-500 focus:ring-1 focus:ring-green-200"
                                                    />
                                                    <div className={`text-xs mt-1 ${strengthWords >= 10 ? 'text-green-600' : 'text-gray-500'}`}>
                                                        {strengthWords} words {strengthWords >= 10 && '✓'}
                                                    </div>
                                                </td>
                                                <td className="border border-gray-300 p-2">
                                                    <textarea
                                                        value={el.globalLimitation}
                                                        onChange={(e) => updateCurrentPosition(element.key, 'globalLimitation', e.target.value)}
                                                        placeholder={element.limitationPlaceholder}
                                                        className="w-full p-2 border border-gray-200 rounded text-sm resize-vertical min-h-[80px] focus:border-orange-500 focus:ring-1 focus:ring-orange-200"
                                                    />
                                                    <div className={`text-xs mt-1 ${limitationWords >= 10 ? 'text-orange-600' : 'text-gray-500'}`}>
                                                        {limitationWords} words {limitationWords >= 10 && '✓'}
                                                    </div>
                                                </td>
                                            </tr>
                                        );
                                    })}
                                </tbody>
                            </table>
                        </div>

                        <div className="flex justify-end">
                            <button
                                onClick={() => setCurrentStep(2)}
                                disabled={!isSection1Complete()}
                                className={`px-6 py-2 rounded-lg text-white font-medium transition-colors ${
                                    isSection1Complete() 
                                        ? 'bg-orange-500 hover:bg-orange-600' 
                                        : 'bg-gray-300 cursor-not-allowed'
                                }`}
                            >
                                Set Success Metrics →
                            </button>
                        </div>
                    </div>
                );
            };

            const renderSection2 = () => (
                <div className="space-y-4">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Success Metrics Builder
                        </h3>
                        <p className="text-gray-600 text-sm">
                            Define measurable goals for your market entry timeline
                        </p>
                    </div>

                    {/* Tab Navigation */}
                    <div className="flex space-x-1 mb-4">
                        <button
                            onClick={() => setActiveTab('6months')}
                            className={`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${
                                activeTab === '6months'
                                    ? 'bg-orange-500 text-white'
                                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                            }`}
                        >
                            <Clock className="inline mr-2" size={16} />
                            6 Months
                        </button>
                        <button
                            onClick={() => setActiveTab('12months')}
                            className={`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${
                                activeTab === '12months'
                                    ? 'bg-orange-500 text-white'
                                    : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                            }`}
                        >
                            <TrendingUp className="inline mr-2" size={16} />
                            12 Months
                        </button>
                    </div>

                    {/* Tab Content */}
                    {activeTab === '6months' && (
                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h4 className="text-md font-semibold text-blue-800 mb-3">6-Month Targets</h4>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 laptop-grid">
                                <div>
                                    <label className="block text-blue-700 text-sm font-medium mb-2">Key Metrics <span className="text-xs text-gray-500">(describe in 2+ words)</span></label>
                                    {sixMonthMetrics.map((metric, index) => (
                                        <div key={index} className="mb-3">
                                            <textarea
                                                value={metric}
                                                onChange={(e) => updateArrayItem(sixMonthMetrics, setSixMonthMetrics, index, e.target.value)}
                                                placeholder={
                                                    index === 0 ? "e.g., Pilot customers secured" :
                                                    index === 1 ? "e.g., Market validation completed" :
                                                    "e.g., Partnership agreements signed"
                                                }
                                                className="w-full laptop-textarea p-2 border border-blue-300 rounded focus:border-blue-500 text-sm placeholder-gray-400"
                                            />
                                            <div className="flex justify-between items-center mt-1">
                                                <span className="text-xs text-gray-500">
                                                    {/* Hint text or empty */}
                                                </span>
                                                <span className={`text-sm flex items-center gap-1 ${metric.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 ? 'text-green-600' : 'text-gray-500'}`}>
                                                    {metric.trim().split(/\s+/).filter(w => w.length > 0).length} words
                                                    {metric.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 && <CheckCircle size={16} />}
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div>
                                    <label className="block text-blue-700 text-sm font-medium mb-2">Target Goals <span className="text-xs text-gray-500">(describe in 2+ words)</span></label>
                                    {sixMonthTargets.map((target, index) => (
                                        <div key={index} className="mb-3">
                                            <textarea
                                                value={target}
                                                onChange={(e) => updateArrayItem(sixMonthTargets, setSixMonthTargets, index, e.target.value)}
                                                placeholder={
                                                    index === 0 ? "e.g., 3-5 paying pilot customers" :
                                                    index === 1 ? "e.g., Complete market research in 2 target regions" :
                                                    "e.g., 2-3 strategic partnership MOUs"
                                                }
                                                className="w-full laptop-textarea p-2 border border-blue-300 rounded focus:border-blue-500 text-sm placeholder-gray-400"
                                            />
                                            <div className="flex justify-between items-center mt-1">
                                                <span className="text-xs text-gray-500">
                                                    {/* Hint text or empty */}
                                                </span>
                                                <span className={`text-sm flex items-center gap-1 ${target.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 ? 'text-green-600' : 'text-gray-500'}`}>
                                                    {target.trim().split(/\s+/).filter(w => w.length > 0).length} words
                                                    {target.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 && <CheckCircle size={16} />}
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {activeTab === '12months' && (
                        <div className="bg-purple-50 border border-purple-200 rounded-lg p-4">
                            <h4 className="text-md font-semibold text-purple-800 mb-3">12-Month Targets</h4>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 laptop-grid">
                                <div>
                                    <label className="block text-purple-700 text-sm font-medium mb-2">Key Metrics <span className="text-xs text-gray-500">(describe in 2+ words)</span></label>
                                    {twelveMonthMetrics.map((metric, index) => (
                                        <div key={index} className="mb-3">
                                            <textarea
                                                value={metric}
                                                onChange={(e) => updateArrayItem(twelveMonthMetrics, setTwelveMonthMetrics, index, e.target.value)}
                                                placeholder={
                                                    index === 0 ? "e.g., Monthly Recurring Revenue (MRR)" :
                                                    index === 1 ? "e.g., Customer acquisition rate" :
                                                    "e.g., Market penetration percentage"
                                                }
                                                className="w-full laptop-textarea p-2 border border-purple-300 rounded focus:border-purple-500 text-sm placeholder-gray-400"
                                            />
                                            <div className="flex justify-between items-center mt-1">
                                                <span className="text-xs text-gray-500">
                                                    {/* Hint text or empty */}
                                                </span>
                                                <span className={`text-sm flex items-center gap-1 ${metric.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 ? 'text-green-600' : 'text-gray-500'}`}>
                                                    {metric.trim().split(/\s+/).filter(w => w.length > 0).length} words
                                                    {metric.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 && <CheckCircle size={16} />}
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div>
                                    <label className="block text-purple-700 text-sm font-medium mb-2">Target Goals <span className="text-xs text-gray-500">(describe in 2+ words)</span></label>
                                    {twelveMonthTargets.map((target, index) => (
                                        <div key={index} className="mb-3">
                                            <textarea
                                                value={target}
                                                onChange={(e) => updateArrayItem(twelveMonthTargets, setTwelveMonthTargets, index, e.target.value)}
                                                placeholder={
                                                    index === 0 ? "e.g., $50K+ MRR from international markets" :
                                                    index === 1 ? "e.g., 10+ new customers per month" :
                                                    "e.g., 2-3% market share in target region"
                                                }
                                                className="w-full laptop-textarea p-2 border border-purple-300 rounded focus:border-purple-500 text-sm placeholder-gray-400"
                                            />
                                            <div className="flex justify-between items-center mt-1">
                                                <span className="text-xs text-gray-500">
                                                    {/* Hint text or empty */}
                                                </span>
                                                <span className={`text-sm flex items-center gap-1 ${target.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 ? 'text-green-600' : 'text-gray-500'}`}>
                                                    {target.trim().split(/\s+/).filter(w => w.length > 0).length} words
                                                    {target.trim().split(/\s+/).filter(w => w.length > 0).length >= 2 && <CheckCircle size={16} />}
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="bg-green-50 border border-green-200 rounded-lg p-3">
                        <p className="text-green-700 text-sm">
                            <strong>Progress:</strong> Complete at least 2 metric/target pairs for each timeframe to finish this activity.
                            6-month: {sixMonthMetrics.filter((m, i) => m.trim().length >= 5 && sixMonthTargets[i].trim().length >= 5).length}/2 pairs, 
                            12-month: {twelveMonthMetrics.filter((m, i) => m.trim().length >= 5 && twelveMonthTargets[i].trim().length >= 5).length}/2 pairs
                        </p>
                    </div>

                    <div className="flex justify-between">
                        <button
                            onClick={() => setCurrentStep(1)}
                            className="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors"
                        >
                            ← Back to Assessment
                        </button>
                        
                        <button
                            onClick={() => setCurrentStep(3)}
                            disabled={!isSection2Complete()}
                            className={`px-6 py-2 rounded-lg text-white font-medium transition-colors ${
                                isSection2Complete() 
                                    ? 'bg-orange-500 hover:bg-orange-600' 
                                    : 'bg-gray-300 cursor-not-allowed'
                            }`}
                        >
                            Complete Activity →
                        </button>
                    </div>
                </div>
            );

            const renderSection3 = () => (
                <div className="space-y-4">
                    <div className="text-center mb-4">
                        <h3 className="text-xl font-bold text-gray-800 mb-2">
                            Foundation & Goals Complete
                        </h3>
                        <p className="text-gray-600 text-sm">
                            You've assessed your position and set success metrics for market entry
                        </p>
                    </div>

                    <div className="bg-green-50 border border-green-300 rounded-lg p-4">
                        <h4 className="font-semibold text-green-800 mb-3 flex items-center">
                            <CheckCircle className="mr-2" size={20} />
                            Market Entry Foundation Complete!
                        </h4>
                        
                        <div className="space-y-3">
                            <div>
                                <h5 className="font-medium text-green-700 mb-1">Current Position Summary:</h5>
                                <p className="text-sm text-gray-700 mb-2">
                                    <strong>Elements Completed:</strong> {(() => {
                                        const elements = Object.values(currentPosition);
                                        return elements.filter(element => {
                                            const strengthWords = element.localStrength.trim().split(/\s+/).filter(w => w.length > 0).length;
                                            const limitationWords = element.globalLimitation.trim().split(/\s+/).filter(w => w.length > 0).length;
                                            return strengthWords >= 10 && limitationWords >= 10;
                                        }).length;
                                    })()} of 5 required
                                </p>
                            </div>
                            
                            <div>
                                <h5 className="font-medium text-green-700 mb-1">Success Metrics Defined:</h5>
                                <p className="text-sm text-gray-700 mb-2">
                                    <strong>6-Month Goals:</strong> {sixMonthMetrics.filter(m => m.trim()).length} metrics set
                                </p>
                                <p className="text-sm text-gray-700">
                                    <strong>12-Month Goals:</strong> {twelveMonthMetrics.filter(m => m.trim()).length} metrics set
                                </p>
                            </div>
                        </div>
                    </div>

                    {/* Assessment Summary Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h5 className="font-medium text-blue-800 mb-2">📊 Readiness Score</h5>
                            <div className="text-2xl font-bold text-blue-700">
                                {(() => {
                                    const elements = Object.values(currentPosition);
                                    const completedElements = elements.filter(element => {
                                        const strengthWords = element.localStrength.trim().split(/\s+/).filter(w => w.length > 0).length;
                                        const limitationWords = element.globalLimitation.trim().split(/\s+/).filter(w => w.length > 0).length;
                                        return strengthWords >= 10 && limitationWords >= 10;
                                    }).length;
                                    const metricsCount = [...sixMonthMetrics, ...twelveMonthMetrics].filter(m => m.trim().length >= 5).length;
                                    const completed = completedElements + metricsCount;
                                    const percentage = Math.round((completed / 11) * 100);
                                    return percentage + '%';
                                })()}
                            </div>
                            <p className="text-sm text-blue-600 mt-1">Assessment Complete</p>
                        </div>
                        
                        <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h5 className="font-medium text-green-800 mb-2">✅ Progress Summary</h5>
                            <div className="space-y-1 text-sm">
                                <div className="flex justify-between">
                                    <span>Position Elements:</span>
                                    <span className="font-medium">{(() => {
                                        const elements = Object.values(currentPosition);
                                        return elements.filter(element => {
                                            const strengthWords = element.localStrength.trim().split(/\s+/).filter(w => w.length > 0).length;
                                            const limitationWords = element.globalLimitation.trim().split(/\s+/).filter(w => w.length > 0).length;
                                            return strengthWords >= 10 && limitationWords >= 10;
                                        }).length;
                                    })()}/5</span>
                                </div>
                                <div className="flex justify-between">
                                    <span>Success Metrics:</span>
                                    <span className="font-medium">{[...sixMonthMetrics, ...twelveMonthMetrics].filter(m => m.trim()).length}/6</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Export Professional Report */}
                    <div className="bg-white border border-gray-300 rounded-lg p-4 mb-6">
                        <div className="flex items-center mb-3">
                            <FileText className="text-blue-600 mr-2" size={20} />
                            <h4 className="font-semibold text-gray-800">📄 Export Professional Report</h4>
                        </div>
                        
                        <p className="text-sm text-gray-600 mb-3">
                            Your assessment has been formatted as a professional markdown report with executive summary, 
                            position analysis, readiness scoring, and action items.
                        </p>

                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
                            <h5 className="font-medium text-blue-800 mb-2">📌 Google Docs Instructions:</h5>
                            <ol className="text-sm text-blue-700 space-y-1">
                                <li>1. Click "Copy Activity Summary" below</li>
                                <li>2. Open Google Docs and create a new document</li>
                                <li>3. Go to <strong>Edit → Paste special → Paste from markdown</strong></li>
                                <li>4. Your report will appear with proper formatting, tables, and styling!</li>
                            </ol>
                            <p className="text-xs text-blue-600 mt-2">
                                💡 <strong>Tip:</strong> "Paste from markdown" preserves all formatting including tables, headers, and bullet points.
                            </p>
                        </div>

                        <textarea
                            id="markdownSummary"
                            readOnly
                            className="w-full h-64 text-sm p-3 font-mono border border-gray-200 rounded-lg bg-gray-50 resize mb-3"
                            value={(() => {
                                try {
                                    const elements = Object.values(currentPosition);
                                    const completedElements = elements.filter(element => {
                                        const strengthWords = element.localStrength.trim().split(/\s+/).filter(w => w.length > 0).length;
                                        const limitationWords = element.globalLimitation.trim().split(/\s+/).filter(w => w.length > 0).length;
                                        return strengthWords >= 10 && limitationWords >= 10;
                                    }).length;
                                const metricsCount = [...sixMonthMetrics, ...twelveMonthMetrics].filter(m => m.trim().length >= 5).length;
                                const percentage = Math.round(((completedElements + metricsCount) / 11) * 100);
                                const readinessStatus = percentage >= 80 ? percentage + '% - Strong 🟢' : 
                                                      percentage >= 60 ? percentage + '% - Moderate 🟡' : 
                                                      percentage + '% - Developing 🟠';
                                
                                return `# Market Entry Readiness: Foundation & Goals

### 📋 Executive Summary

**Market Entry Readiness Score: ${readinessStatus}**

**Assessment Completion:**
- Position Elements: ${completedElements}/5 completed
- Success Metrics Defined: ${metricsCount}/6

---

### 🏢 Current Position Analysis

| Element | Local Strength | Global Limitation |
|---------|----------------|-------------------|
${Object.entries(currentPosition).filter(([key, value]) => value.localStrength.trim() || value.globalLimitation.trim()).map(([key, value]) => {
  const elementNames = {
    uniqueAttributes: 'Unique Attributes',
    marketKnowledge: 'Market Knowledge',
    resources: 'Resources',
    networkRelationships: 'Network/Relationships',
    infrastructure: 'Infrastructure'
  };
  return `| ${elementNames[key]} | ${value.localStrength || '[Not provided]'} | ${value.globalLimitation || '[Not provided]'} |`;
}).join('\n')}

### 📊 Success Metrics & Targets

| Metric | 6-Month Target | 12-Month Target |
|--------|----------------|-----------------|
${(() => {
  const rows = [];
  const maxRows = Math.max(sixMonthMetrics.filter(m => m.trim()).length, twelveMonthMetrics.filter(m => m.trim()).length);
  for (let i = 0; i < maxRows; i++) {
    const metric6 = sixMonthMetrics[i]?.trim() || '';
    const target6 = sixMonthTargets[i]?.trim() || '';
    const metric12 = twelveMonthMetrics[i]?.trim() || '';
    const target12 = twelveMonthTargets[i]?.trim() || '';
    const metricName = metric6 || metric12 || '[Not provided]';
    rows.push(`| ${metricName} | ${target6 || '[Not set]'} | ${target12 || '[Not set]'} |`);
  }
  return rows.join('\n');
})()}

### 📅 Assessment Details

**Report Generated:** ${new Date().toLocaleDateString('en-US', { 
  weekday: 'long', 
  year: 'numeric', 
  month: 'long', 
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit',
  timeZoneName: 'short'
})}

**Activity:** Foundation & Goals Assessment (Activity 1 of 3)  
**Workshop Series:** Market Entry Readiness - GTM Program  
**Next Steps:** Continue to Activity 2 - Market Reality Check

*This assessment provides foundational insights for market entry planning. Results should be reviewed with strategic advisors and updated as market conditions evolve.*`;
                                } catch (error) {
                                    console.error('Error generating markdown:', error);
                                    return 'Error generating summary. Please try again.';
                                }
                            })()}
                        />
                        
                        <div className="flex flex-col items-center">
                            <button
                                onClick={(event) => {
                                    // Copy to clipboard with fallback
                                    const copyToClipboard = async (text) => {
                                        try {
                                            // Try modern clipboard API first
                                            if (navigator.clipboard && navigator.clipboard.writeText) {
                                                await navigator.clipboard.writeText(text);
                                                return true;
                                            } else {
                                                // Fallback for older browsers or file:// protocol
                                                const textArea = document.createElement('textarea');
                                                textArea.value = text;
                                                textArea.style.position = 'fixed';
                                                textArea.style.left = '-999999px';
                                                document.body.appendChild(textArea);
                                                textArea.focus();
                                                textArea.select();
                                                
                                                try {
                                                    const successful = document.execCommand('copy');
                                                    document.body.removeChild(textArea);
                                                    return successful;
                                                } catch (err) {
                                                    document.body.removeChild(textArea);
                                                    return false;
                                                }
                                            }
                                        } catch (err) {
                                            console.error('Copy failed:', err);
                                            return false;
                                        }
                                    };

                                    const el = document.getElementById('markdownSummary');
                                    const statusDiv = document.getElementById('copyStatus');
                                    
                                    copyToClipboard(el.value).then((success) => {
                                        if (success) {
                                            // Show success status below button
                                            statusDiv.innerHTML = `
                                                <div class="mt-2 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded-lg">
                                                    <p class="font-medium">✅ Copied to Clipboard!</p>
                                                    <p class="text-sm mt-1">Now paste in Google Docs: <strong>Edit → Paste special → Paste from markdown</strong></p>
                                                </div>
                                            `;
                                            
                                            // Also show floating notification
                                            const notification = document.createElement('div');
                                            notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #22c55e; color: white; padding: 16px 24px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 9999; font-weight: 500;';
                                            notification.textContent = '✅ Activity summary copied!';
                                            document.body.appendChild(notification);
                                            
                                            // Fade out notification
                                            setTimeout(() => {
                                                notification.style.transition = 'opacity 0.5s';
                                                notification.style.opacity = '0';
                                                setTimeout(() => notification.remove(), 500);
                                            }, 2500);
                                            
                                            // Clear status after 3 seconds
                                            setTimeout(() => {
                                                statusDiv.innerHTML = '';
                                            }, 3000);
                                        } else {
                                            // Show error status
                                            statusDiv.innerHTML = `
                                                <div class="mt-2 bg-red-100 border border-red-400 text-red-700 px-4 py-2 rounded-lg">
                                                    <p class="font-medium">❌ Copy Failed</p>
                                                    <p class="text-sm">Please select and copy the text manually.</p>
                                                </div>
                                            `;
                                            
                                            setTimeout(() => {
                                                statusDiv.innerHTML = '';
                                            }, 3000);
                                        }
                                    });
                                }}
                                className="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 text-sm font-medium"
                            >
                                📋 Copy Activity Summary
                            </button>
                            <div id="copyStatus"></div>
                        </div>
                    </div>

                    {/* Next Steps */}
                    <div className="bg-orange-50 border border-orange-200 rounded-lg p-4">
                        <h4 className="text-md font-bold text-orange-800 mb-2">🎯 Next: Market Reality Check</h4>
                        <p className="text-orange-700 text-sm mb-2">
                            In Activity 2, you'll analyze your target market and compare Japan vs US market dynamics.
                        </p>
                        <div className="text-sm text-orange-700">
                            <p className="mb-1"><strong>Coming up:</strong></p>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-1">
                                <div>• Target market analysis (5 factors)</div>
                                <div>• Japan vs US comparison</div>
                                <div>• Market opportunity assessment</div>
                                <div>• Risk evaluation framework</div>
                            </div>
                        </div>
                    </div>

                    <div className="text-center space-x-4 mt-6">
                        <button
                            onClick={() => setCurrentStep(2)}
                            className="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors"
                        >
                            ← Back to Edit
                        </button>
                        <button
                            onClick={() => window.location.href = 'market-entry-activity-2A.html'}
                            className="bg-orange-500 text-white px-8 py-3 rounded-lg hover:bg-orange-600 transition-colors font-semibold"
                        >
                            Continue to Activity 2
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="max-w-[900px] mx-auto p-4 bg-gradient-to-br from-orange-100 to-orange-200 min-h-screen">
                    {/* Header */}
                    <div className="bg-white rounded-lg shadow-lg p-4 mb-4 sticky top-0 z-50">
                        <div className="flex justify-between items-center w-full mb-2">
                            <a 
                                href="index.html" 
                                className="inline-flex items-center text-orange-600 hover:text-orange-700 transition-colors text-sm font-medium"
                            >
                                <span className="mr-1">←</span> Back to Workshop
                            </a>
                            <a 
                                href="../index.html" 
                                className="inline-flex items-center text-gray-600 hover:text-orange-700 transition-colors text-sm font-medium"
                            >
                                All GTM Workshops <span className="ml-1">↑</span>
                            </a>
                        </div>
                        <div className="flex items-center justify-between mb-2">
                            <h1 
                                className={`text-xl font-bold text-gray-800 ${devMode ? 'text-orange-600' : ''} cursor-pointer select-none`}
                                onDoubleClick={toggleDevMode}
                                title="Double-click to toggle dev mode"
                            >
                                Activity 1: Foundation and Goals Assessment {devMode && '🔧'}
                            </h1>
                            <div className="text-sm text-gray-600">
                                Activity 1 of 3
                            </div>
                        </div>
                        
                        {/* Progress indicator */}
                        <div className="w-full bg-gray-200 rounded-full h-2">
                            <div className={`bg-orange-500 h-2 rounded-full transition-all duration-300 ${
                                currentStep === 1 ? 'w-1/3' : currentStep === 2 ? 'w-2/3' : 'w-full'
                            }`}></div>
                        </div>
                        <div className="flex justify-between text-xs text-gray-600 mt-1">
                            <span>Position</span>
                            <span>Metrics</span>
                            <span>Complete</span>
                        </div>
                        
                        {/* Dev Mode Controls */}
                        {devMode && (
                            <div className="mt-3 pt-3 border-t border-orange-200">
                                <div className="flex items-center justify-between">
                                    <span className="text-xs text-orange-600 font-medium">🔧 Dev Mode Active</span>
                                    <button
                                        onClick={devFillData}
                                        disabled={devFillLoading}
                                        className="bg-orange-500 text-white px-3 py-1 rounded text-xs hover:bg-orange-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        {devFillLoading ? '⏳ Loading...' : '📝 Fill Test Data'}
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>


                    {/* Main Content */}
                    <div className="bg-white rounded-lg shadow-lg p-6 relative">
                        <button
                            onClick={resetActivity}
                            className="absolute -top-2 -right-2 w-8 h-8 bg-gray-200 hover:bg-orange-500 hover:text-white rounded-full flex items-center justify-center transition-all duration-200 text-gray-600"
                            title="Reset Activity"
                        >
                            <span className="text-lg font-bold">↻</span>
                        </button>
                        {currentStep === 1 && renderSection1()}
                        {currentStep === 2 && renderSection2()}
                        {currentStep === 3 && renderSection3()}
                    </div>
                </div>
            );
        };

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<MarketEntryActivity1 />);
    </script>
</body>
</html><!-- Cache bust: Wed Jun 25 13:04:06 JST 2025 -->
